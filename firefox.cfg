// -----------------------
// 102.1111122.2255
// -----------------------
// GCB    1979924e254e3b32473d8920733f54f3bd464533 https://www.nccst.nat.gov.tw/GCB
// Ghacks cc0f05388f6c721c358e89372caac604f84fd0d9 https://github.com/arkenfox/user.js
// LW     9395f5c0e061250acbcbcb523d2270d57136d411 https://gitlab.com/librewolf-community/settings
// PHDE2e d967f547276b17dd1e0cc174e7838ca8e4c462a4 https://www.privacy-handbuch.de/handbuch_21u.htm
// 12B    ceb31c7c8fc0183e5dd882f97bdced2bcc473dbd https://codeberg.org/12bytes.org/firefox-user.js-supplement
// IceCat 262619d8d1771a7b3ef79e5f0e49aa98c2e2366a https://git.savannah.gnu.org/cgit/gnuzilla.git/tree/data/settings.js
// Pyko   fee5f3342c609bb63f7f354138c8728e452b7e46 https://github.com/pyllyukko/user.js

/**
 *
 * # Firefox Preference AutoConfig
 * 
 *   ## Format:
 *   
 *     - pref(prefName, value)           軟鎖定 (可臨時修改, 重開流覽器時回復設定)
 *     - lockPref(prefName, value)       硬鎖定 (使用者介面呈灰色, 即不可用狀態)
 *     - clearPref(prefName)             重設偏好, 若偏好設定不存在將拋出錯誤
 *     - defaultPref(prefName, value)    更改預設值
 *     - unlockPref(prefName)            解鎖偏好 (為特定使用者)
 *     - getPref(prefName)               檢索偏好的值, 若偏好設定不存在將拋出錯誤
 *     - displayError(funcname, message) 顯示偵錯資訊
 *     - getenv(name)                    詢問環境變數
 *     
 *   ## Type of value:
 *   
 *     - String is any sequence of text  字串為文本
 *     - Integer is a number             整數為數字
 *     - Boolean is true or false        布林為真偽
 *     
 *   ## Tips:
 *   
 *     1. AutoConfig 自動設定檔是功能完整的 JavaScript 指令碼檔, 因此要區分大小寫. 
 *        遭遇 Configuration Error 可透過 Browser Console (Ctrl+Shift+J) 偵錯.
 *     
 *     2. 同一個偏好可在不同類型的設定檔中重複出現, 但以優先權最高的設定為準.
 *     
 *       1st level: Remote profile:           :
 *       2nd level: System Level  : Policy    : json
 *       3rd level: Client Level  : AutoConfig: cfg
 *       4th level: User Level    : User.js   : js
 *       
 *     3. 設定檔在每次開啟 FF 時由上而下逐條讀取, 每逢重複或衝突則以最後讀到的設定為準.
 *     
 *     4. 使用者資料夾中的 prefs.js 乃自動生成, 切勿編輯, 否則將丟失介面及增益集設定.
 *     
 *     5. 偏好設定與自動設定檔
 *     
 *       - https://www-archive.mozilla.org/catalog/end-user/customizing/briefprefs
 *       - https://support.mozilla.org/en-US/kb/customizing-firefox-using-autoconfig
 *       - https://developer.mozilla.org/en-US/docs/Mozilla/Preferences/A_brief_guide_to_Mozilla_preferences
 *       - https://developer.mozilla.org/en-US/docs/Mozilla/Firefox/Enterprise_deployment_before_60
 *       - https://mike.kaply.com/2012/03/16/customizing-firefox-autoconfig-files
 *       - https://mike.kaply.com/2012/03/20/customizing-firefox-autoconfig-files-continued
 *       - https://mike.kaply.com/2012/03/22/customizing-firefox-advanced-autoconfig-files
 *       
 *     6. 安裝程式命令列
 *     
 *       - https://wiki.mozilla.org/Installer:Command_Line_Arguments
 *       - https://firefox-source-docs.mozilla.org/browser/installer/windows/installer/FullConfig.html
 *       - https://firefox-source-docs.mozilla.org/browser/installer/windows/installer/MSI.html
 *       - https://support.mozilla.org/kb/deploy-firefox-msi-installers
 *       - https://searchfox.org/mozilla-central/source/browser/installer/windows/msi/installer.wxs
 *       
 *     7. 儘管在安裝時程式向使用者申請賦以特權, 但這並非必要. 區別如下:
 *     
 *       - 以管理者 (admin) 身分, 程式將被安裝至系統磁區中的 "Program Files" 並可被所有使用者存取;
 *       - 以使用者 (user) 身分, 程式將被安裝至系統磁區中的 "Local Appdata" 且僅可被當前使用者存取.
 *       - 可被所有使用者存取意味著增加了作業系統的受攻擊面.
 *       - 以使用者身分安裝時可能無法註冊為 handler, 需在安裝位置以特權執行 `".\uninstall\helper.exe" /SetAsDefaultAppUser`.
 *       
 *   ## References:
 *   
 *     - searchfox.org
 *     - hg.mozilla.org
 *     - bugzilla.mozilla.org
 *     - wiki.mozilla.org
 *     - firefox-source-docs.mozilla.org
 *     - ghacks.net
 *     - developer.mozilla.org
 *     - support.mozilla.org
 *     - mozillazine.org (.jp)
 *     
 *   ## Labels:
 *   
 *     [i]                  : 資料, 注釋
 *     [*]                  : 警示
 *     [53-], [55-68], [-78]: 以版次表示對應設定的有效期限
 *     [x]                  : 已被淘汰且有效期限不明的設定
 *     [Fennec], [Fenix]    : 僅在特定組建或作業系統中有效的設定
 *     [~]:NOTE             : 上游變動
 *     [BUG#1234], [TKT#123]: ｢問題追蹤系統｣ 之單據號碼
 *     Han (English)        : 對應英單字可能並非主流譯法
 *     
 *     BUG#:
 *       - https://bugzilla.mozilla.org/show_bug.cgi?id=%s
 *       - https://bugzilla.mozilla.org/buglist.cgi?bug_id=%s
 *     TKT#:
 *       - https://trac.torproject.org/projects/tor/ticket/%s
 *     KB#:
 *       - https://support.microsoft.com/kb/%s
 *     GIT#:
 *       - https://github.com/arkenfox/user.js/issues/%s
 *     
 * # Windows 中的輸入工具故障
 *   
 *   1. 某些應用程式以較高優先權使用了 "Accessibility API".
 *      此行為應在 Firefox 59 中被矯正.
 *   
 *   1. 由 Firefox 並列執行架構 "e10S" 所致.
 *      此錯誤應在 Windows 10 中被糾正.
 *   
 *   1. 偏好設定中 "javascript.use_us_english_locale" 的值為 ｢真｣.
 *      設之為 ｢假｣ 或換用 Tor Browser -- 這是一個免設定的 Firefox ESR 變體.
 *   
 *   1. Windows 作業系統之 "Log Service" 被停用或中止.
 *      啟用之或 Win+R run "ctfmon.exe".
 *   
 *   [i] http://mozilla.com.cn/thread-403796-1-1.html
 *   [i] https://developer.mozilla.org/docs/Mozilla/IME_handling_guide
 *   [*] 此問題無關語言環境, 請勿嘗試替換為 Firefox China ｢火狐中國版｣ (又名 ｢火狐多功能版｣ ),
 *       該版本由 Mozilla Online ｢北京謀智｣ (911101015694552453) 控制, 含內建廣告位及功能鎖定, 遙測和個資送達牆國.
 * 
 * # Firefox 始終無法通過 CAPTCHA 測驗
 * 
 *   1. 明顯的 Tor Browser 指標, 如 "User-Agent: Mozilla/5.0 (Windows NT 10.0; rv:91.0) Gecko/20100101 Firefox/91.0".
 *   1. 清除了必要的查詢字串, 如 "__cf_chl_tk".
 *   1. 拒絕了必要的 cookie, 如 "cf_chl_rc_i".
 *   
 *   [i] https://gitlab.com/librewolf-community/browser/linux/-/issues/244
 *   
 * # Browser Choice
 * 
 *   - https://madaidans-insecurities.github.io/firefox-chromium.html
 *   - https://marc.info/?l=openbsd-misc&m=152872551609819&w=2
 *   - https://news.ycombinator.com/item?id=13623735
 *   - https://jandemooij.nl/blog/wx-jit-code-enabled-in-firefox
 *   - https://grapheneos.org/usage#web-browsing
 *   - https://medium.com/@thegrugq/tor-and-its-discontents-ef5164845908
 *   - https://twitter.com/tqbf/status/930860544927649792
 *   - https://twitter.com/tqbf/status/930807512609296384
 *   - https://blog.skk.moe/post/why-not-use-firefox
 *   
 *   RR 85.0.1 (ESR 78.7.1) 及先前版次允許非特權使用者透過訪問由 ":$" 構造的特殊位址將 NTFS 卷標記為已損壞, 並且難以復原.
 *   [i] https://www.bleepingcomputer.com/news/software/mozilla-fixes-windows-10-ntfs-corruption-bug-in-firefox
 *   
 * # 自動設定檔遭竄改之情形
 * 
 *   以 Kaspersky 為例, 為匯入根憑證以分析加密訊務, 現有設定檔將被附加如下內容:
 *   
 *   > // kl_config_UUID.cfg
 *   > lockPref("security.enterprise_roots.enabled", true);
 *   
 *   欲終止此行為, 需在 Kaspersky 網路設定中選中 ｢使用 Mozilla 憑證倉庫｣, 或參照此連結: https://support.kaspersky.com/15215
 *   此問題影響使用 Windows end-of-line (CRLF) 控制字元, 且未修改位移量的 AutoConfig 檔.
 *   
*/

// ---------------------------------------------------
// # Recycle Bin
// ---------------------------------------------------

// "browser.preferences.defaultPerformanceSettings.enabled"                     // Use recommended performance settings
// "dom.ipc.processCount"                                                       // Content process limit
// "layers.acceleration.disabled"                                               // Use hardware acceleration when available
// "browser.bookmarks.restore_default_bookmarks"                                // 進入 ｢檢修模式｣ 時重設書籤 [BUG#1439443]
// "browser.urlbar.usepreloadedtopurls.enabled"                                 // 自動補充無法傳回有效站址時, 傳回寫死的 Alexa TOP500 站址
// "services.common.log.logger.rest.request"	
// "services.common.log.logger.rest.response"	
// "services.common.log.logger.tokenserverclient"

// Deprecated SSL3/TLS Cipher Suite
clearPref("security.ssl3.ecdhe_rsa_aes_128_sha");
clearPref("security.ssl3.ecdhe_ecdsa_aes_256_sha");
clearPref("security.ssl3.ecdhe_ecdsa_aes_128_sha");
clearPref("security.ssl3.rsa_aes_256_gcm_sha384");
clearPref("security.ssl3.rsa_aes_128_gcm_sha256");
clearPref("security.ssl3.rsa_aes_256_sha");
clearPref("security.ssl3.rsa_aes_128_sha");
clearPref("security.ssl3.rsa_des_ede3_sha");
clearPref("security.ssl3.rsa_fips_des_ede3_sha");                               // 0xFEFF SSL_RSA_FIPS_WITH_3DES_EDE_CBC_SHA
clearPref("security.ssl3.ecdhe_rsa_des_ede3_sha");                              // 0xC012 TLS_ECDHE_RSA_WITH_3DES_EDE_CBC_SHA
clearPref("security.ssl3.ecdhe_rsa_rc4_128_sha");                               // 0xC011 TLS_ECDHE_RSA_WITH_RC4_128_SHA
clearPref("security.ssl3.ecdhe_rsa_null_sha");                                  // 0xC010 TLS_ECDHE_RSA_WITH_NULL_SHA
clearPref("security.ssl3.ecdh_rsa_aes_256_sha");                                // 0xC00F TLS_ECDH_RSA_WITH_AES_256_CBC_SHA
clearPref("security.ssl3.ecdh_rsa_aes_128_sha");                                // 0xC00E TLS_ECDH_RSA_WITH_AES_128_CBC_SHA 
clearPref("security.ssl3.ecdh_rsa_des_ede3_sha");                               // 0xC00D TLS_ECDH_RSA_WITH_3DES_EDE_CBC_SHA
clearPref("security.ssl3.ecdh_rsa_rc4_128_sha");                                // 0xC00C TLS_ECDH_RSA_WITH_RC4_128_SHA
clearPref("security.ssl3.ecdh_rsa_null_sha");                                   // 0xC00B TLS_ECDH_RSA_WITH_NULL_SHA
clearPref("security.ssl3.ecdhe_ecdsa_des_ede3_sha");                            // 0xC008 TLS_ECDHE_ECDSA_WITH_3DES_EDE_CBC_SHA
clearPref("security.ssl3.ecdhe_ecdsa_rc4_128_sha");                             // 0xC007 TLS_ECDHE_ECDSA_WITH_RC4_128_SHA
clearPref("security.ssl3.ecdhe_ecdsa_null_sha");                                // 0xC006 TLS_ECDHE_ECDSA_WITH_NULL_SHA
clearPref("security.ssl3.ecdh_ecdsa_aes_256_sha");                              // 0xC005 TLS_ECDH_ECDSA_WITH_AES_256_CBC_SHA
clearPref("security.ssl3.ecdh_ecdsa_aes_128_sha");                              // 0xC004 TLS_ECDH_ECDSA_WITH_AES_128_CBC_SHA
clearPref("security.ssl3.ecdh_ecdsa_des_ede3_sha");                             // 0xC003 TLS_ECDH_ECDSA_WITH_3DES_EDE_CBC_SHA
clearPref("security.ssl3.ecdh_ecdsa_rc4_128_sha");                              // 0xC002 TLS_ECDH_ECDSA_WITH_RC4_128_SHA 
clearPref("security.ssl3.ecdh_ecdsa_null_sha");                                 // 0xC001 TLS_ECDH_ECDSA_WITH_NULL_SHA
clearPref("security.ssl3.rsa_seed_sha");                                        // 0x0096 TLS_RSA_WITH_SEED_CBC_SHA
clearPref("security.ssl3.dhe_rsa_camellia_256_sha");                            // 0x0088 TLS_DHE_RSA_WITH_CAMELLIA_256_CBC_SHA
clearPref("security.ssl3.dhe_dss_camellia_256_sha");                            // 0x0087 TLS_DHE_DSS_WITH_CAMELLIA_256_CBC_SHA
clearPref("security.ssl3.rsa_camellia_256_sha");                                // 0x0084 TLS_RSA_WITH_CAMELLIA_256_CBC_SHA
clearPref("security.ssl3.rsa_1024_rc4_56_sha");                                 // 0x0064 TLS_RSA_EXPORT1024_WITH_RC4_56_SHA
clearPref("security.ssl3.dhe_rsa_camellia_128_sha");                            // 0x0045 TLS_DHE_RSA_WITH_CAMELLIA_128_CBC_SHA
clearPref("security.ssl3.dhe_dss_camellia_128_sha");                            // 0x0044 TLS_DHE_DSS_WITH_CAMELLIA_128_CBC_SHA
clearPref("security.ssl3.rsa_camellia_128_sha");                                // 0x0041 TLS_RSA_WITH_CAMELLIA_128_CBC_SHA
clearPref("security.ssl3.dhe_dss_aes_256_sha");                                 // 0x0038 TLS_DHE_DSS_WITH_AES_256_CBC_SHA
clearPref("security.ssl3.dhe_dss_aes_128_sha");                                 // 0x0032 TLS_DHE_DSS_WITH_AES_128_CBC_SHA
clearPref("security.ssl3.dhe_rsa_des_ede3_sha");                                // 0x0016 SSL_DHE_RSA_WITH_3DES_EDE_CBC_SHA
clearPref("security.ssl3.dhe_dss_des_ede3_sha");                                // 0x0013 SSL_DHE_DSS_WITH_3DES_EDE_CBC_SHA
clearPref("security.ssl3.rsa_rc2_40_md5");                                      // 0x0006 SSL_RSA_EXPORT_WITH_RC2_CBC_40_MD5
clearPref("security.ssl3.rsa_rc4_128_sha");                                     // 0x0005 SSL_RSA_WITH_RC4_128_SHA
clearPref("security.ssl3.rsa_rc4_128_md5");                                     // 0x0004 SSL_RSA_WITH_RC4_128_MD5
clearPref("security.ssl3.rsa_rc4_40_md5");                                      // 0x0003 SSL_RSA_EXPORT_WITH_RC4_40_MD5
clearPref("security.ssl3.rsa_null_sha");                                        // 0x0002 SSL_RSA_WITH_NULL_SHA
clearPref("security.ssl3.rsa_null_md5");                                        // 0x0001 SSL_RSA_WITH_NULL_MD5

// ---------------------------------------------------
// # Toolkit
// ---------------------------------------------------

// Common log levels 
// all, debug, log, info, clear, trace, warn, error, off.
// https://searchfox.org/mozilla-central/source/toolkit/modules/Console.jsm#291

// Firefox Support base URL
defaultPref("app.support.baseURL", "https://support.mozilla.org/1/firefox/VERSION/OS/%LOCALE%/");
 
// Remote Settings
// [i] https://remote-settings.readthedocs.io/en/latest/introduction.html
// lockPref("services.settings.server", "");                                    // 遠端設定伺服器, 空值可避免 Fennec 的擴充套件被全部停用. [BUG#1729009]
// lockPref("services.settings.poll_interval", -1);                             // 捲動式連線間隔/連線週期 (秒) [BUG#1598562] 0 或 -1 為停用. 

// Normandy (SHIELD Recipe Client)
lockPref("app.normandy.enabled", false);                                        // 診斷, 研究, 遙控 (feature rollouts), 即時修補 (hotfixes).
lockPref("app.normandy.api_url", "");                                           // Make sure Shield doesn't hit the network.
defaultPref("app.normandy.shieldLearnMoreUrl", "https://support.mozilla.org/1/firefox/VERSION/OS/%LOCALE%/shield");

// about:studies
lockPref("app.shield.optoutstudies.enabled", false);                            // ｢好彩有份兼職, 係中央精神病院做研究工作｣ ｢負責做D咩｣ ｢畀人研究｣

// Experiment Manager
lockPref("messaging-system.log", "off");
lockPref("messaging-system.rsexperimentloader.enabled", false);
// "messaging-system.rsexperimentloader.collection_id"
// "nimbus.debug"
// "nimbus.validation.enabled"

// SHIELD Block List
lockPref("extensions.blocklist.enabled", true);                                 // 不相容的繪圖韌體, 被撤銷的中間憑證, 違規增益集.

// Crash Manager
lockPref("breakpad.reportURL", "");
lockPref("browser.crashReports.unsubmittedCheck.enabled", false);               // FF 是否應掃描未呈遞的當機報告並顯示呈遞通告
// pref("browser.crashReports.unsubmittedCheck.chancesUntilSuppress", 4);       // 在 N 天內遏抑呈遞通告前, 顯示並自動關閉 N 次
lockPref("browser.crashReports.unsubmittedCheck.autoSubmit2", false);           // 自動呈遞而無需向使用者詢問

// Startup Crash Tracking
// lockPref("toolkit.startup.max_resumed_crashes", -1);                         // 六小時內, 打開流覽器時當掉 N 次隨即進入 ｢檢修模式｣.

// Telemetry (FHR, Measurements)
clearPref("toolkit.telemetry.cachedClientID"); // [GIT#739]
lockPref("toolkit.telemetry.unified", false);                                   // 遙測 ｢一致行為｣ (unified behavior).
// ^ 若為 ｢真｣, 則遙測始終被啟用, 紀錄基礎資料並附加 main ping.
// ^ [Fennec] 若為 ｢假｣, 實際控制權將移交至 "telemetry.enabled". 
lockPref("toolkit.telemetry.enabled", false);
// ^ 若 unified=T 且 MOZ_UPDATE_CHANNEL 為 nightly, aurora, beta, default (developer builds) 則內部鎖定為 ｢真｣, 反之亦然.
// ^ [Fennec] 若 telemetry.unified=T 則控制附加遙測, 反之控制遙測設定.
lockPref("datareporting.healthreport.uploadEnabled", false);
// ^ 若 telemetry.unified=T, 控制是否傳送遙測資料;
// ^ 若 telemetry.unified=F, 則略過此設定 (don't use this value).
lockPref("toolkit.telemetry.archive.enabled", false);                           // 遙測 ping 本機存檔, 只有 telemetry.unified=T 時才可啟用.
lockPref("toolkit.telemetry.server", "data:,");                                 // 遙測 ping 上載伺服器
// lockPref("toolkit.telemetry.log.level", "off");                              // 遙測紀錄檔級別
// lockPref("toolkit.telemetry.log.dump", false);                               // 遙測紀錄檔是否傾印到標準輸出資料流 (stdout).

// Data-choices notification
lockPref("datareporting.policy.firstRunURL", "");                               // 首次打開程式時造訪線上版私隱條款, 而非顯示資訊氣泡.
lockPref("datareporting.policy.dataSubmissionEnabled", false);                  // 資料呈報總閘, 若停用則不會顯示任何通知或进行上載.

// Ping Centre
lockPref("browser.ping-centre.telemetry", false);
lockPref("browser.ping-centre.log", false);

// Coverage Ping
// [i] coverage ping 不受 ｢遙測設定｣ 控制
lockPref("toolkit.coverage.enabled", false);
lockPref("toolkit.coverage.endpoint.base", "");
lockPref("toolkit.coverage.opt-out", true);

// GeckoView Measurements
// pref("toolkit.telemetry.geckoview.streaming", false);                        // GeckoView 流式遙測 API, 若為 ｢假｣ 則使用傳統遙測.
// pref("toolkit.telemetry.geckoview.batchDurationMS", 5000);                   // 委派任務前, 批次處理 GeckoView 流式遙測的累加時間 (毫秒).
// pref("toolkit.telemetry.geckoview.maxBatchStalenessMS", 60000);              // 批次委派 GeckoView 流式遙測的最大間隔 (毫秒).

lockPref("toolkit.telemetry.coverage.opt-out", true);                           // 測量遙測覆蓋率 [BUG#1487578,1494292] 該測量活動應在民國 109 年 4 月 4 日截止.

// Default Web-browser
lockPref("browser.shell.checkDefaultBrowser", false);                           // 預設流覽器檢查
// lockPref("browser.shell.skipDefaultBrowserCheckOnFirstRun", true);           // 首次打開程式時檢查是否為預設流覽器
lockPref("default-browser-agent.enabled", false);                               // [Windows] Default Browser Agent
// defaultPref("browser.shell.setDefaultBrowserUserChoice", true);              // 註冊為預設 HTTP handler. 在 Win10 中將假手 "UserChoice" 登錄機碼進行侵略性作業 ( https://stackoverflow.com/q/17946282 ).
lockPref("browser.shell.setDefaultPDFHandler", false);                          // 註冊為預設 PDF handler
// defaultPref("browser.shell.setDefaultPDFHandler.onlyReplaceBrowsers", true); // [100-] 只取代指定同業者為預設 PDF handler. 指定同業者: IE 11, Edge (Legacy), Ms Edge, Qihoo Opera, Brave, Yandex.

// ---------------------------------------------------
// # Auto Update
// ---------------------------------------------------

defaultPref("app.update.checkInstallTime", false);                              // At startup, should we check to see if the installation date is older than some threshold
// defaultPref("app.update.checkInstallTime.days", 255);                        // The number of days a binary is permitted to be old without checking is defined in

lockPref("app.update.auto", false);                                             // [Windows,macOS] 自動更新
lockPref("app.update.background.enabled", false);                               // [Windows,macOS] 背景自動更新
lockPref("app.update.background.scheduling.enabled", false);                    // [Windows] 定期背景自動更新
lockPref("app.update.service.enabled", false);                                  // [Windows] Firefox Update Service
lockPref("app.update.staging.enabled", false);                                  // [Windows] 啟用更新整備區 (Staging Area) [BUG#1397562,757981] 透過 Firefox Update Service 在背景進行分段式更新, 否則使用完整更新.

defaultPref("app.update.url.details", "https://www.mozilla.org/firefox/organizations/notes");
defaultPref("app.update.url.manual", "https://www.mozilla.org/firefox/organizations/all");
defaultPref("app.feedback.baseURL", "");
defaultPref("app.releaseNotesURL", "https://www.mozilla.org/%LOCALE%/firefox/%VERSION%/releasenotes");
defaultPref("app.releaseNotesURL.aboutDialog", "https://www.mozilla.org/%LOCALE%/firefox/%VERSION%/releasenotes");

// ---------------------------------------------------
// # Firefox Account
// ---------------------------------------------------

defaultPref("identity.fxaccounts.enabled", false);                              // 控制是否啟用 FxA 與 Sync 功能
defaultPref("identity.fxaccounts.toolbar.enabled", false);                      // 工具列 (toolbar) 登入按鈕

defaultPref("identity.mobilepromo.android", "https://play.google.com/store/apps/details?id=org.mozilla.firefox&hl=%LOCALE%");
defaultPref("identity.mobilepromo.ios", "https://apps.apple.com/app/id989804926");
defaultPref("identity.sendtabpromo.url", "https://support.mozilla.org/1/firefox/VERSION/OS/%LOCALE%/send-tab");

// lockPref("identity.fxaccounts.auth.uri", "");                                // 自訂 FxA, 填入身分認證伺服器
// lockPref("identity.fxaccounts.remote.oauth.uri", "");                        // OAuth 伺服器
// lockPref("identity.fxaccounts.remote.profile.uri", "");                      // 遠端資料檔
// lockPref("identity.fxaccounts.autoconfig.uri", "");                          // 遠端自動設定檔
// lockPref("identity.fxaccounts.remote.pairing.uri", "");                      // 多平臺端末配對伺服器
// lockPref("identity.fxaccounts.service.monitorLoginUrl", "");                 // 由 FxA 供電的 Monitor 服務

// ---------------------------------------------------
// # Chrome GUI
// ---------------------------------------------------

// userChrome.css and userContent.css
// defaultPref("toolkit.legacyUserProfileCustomizations.stylesheets", true);    // GUI 修飾檔

// Mouse and keyboard behavior
// defaultPref("browser.backspace_action", 2);                                  // 退格鍵動作 (Bksp/Shift+Bksp): 0 = 後退/前進; 1 = 向上/向下捲動; 2 = 無動作.
// defaultPref("browser.quitShortcut.disabled", true);                          // [Linux,macOS] 停止回應 Ctrl+Q 按鍵組合
// defaultPref("clipboard.autocopy", false);                                    // 選中即複製
// defaultPref("clipboard.copyPrivateDataToClipboardCloudOrHistory", false);    // [Win10] 允許 about:logins 與 私密流覽 中複製的內容保存到作業系統之剪貼簿或雲端式剪貼簿
// defaultPref("clipboard.plainTextOnly", true);
// defaultPref("general.autoScroll", false);                                    // 按下滑鼠中間鍵時自動捲動 [BUG#1528289]
// lockPref("browser.tabs.opentabfor.middleclick", false);                      // 按下滑鼠中間鍵打開新分頁 [BUG#1686045]
lockPref("middlemouse.paste", false);                                           // 按下滑鼠中間鍵時 ｢貼上｣
lockPref("middlemouse.contentLoadURL", false);                                  // 按下滑鼠中間鍵時載入剪貼簿中的 URL
// 
// [i] 下表摘錄 Mozilla 所使用之虛擬按鍵碼 (virtual-key code) 及其等值按鍵
//     https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/keyCode
// | Hex  | Dec | Description                                      |
// |------|-----|--------------------------------------------------|
// | 0x01 | 1   | Left mouse                                       |
// | 0x02 | 2   | Right mouse                                      |
// | 0x04 | 4   | Middle mouse                                     |
// | 0x05 | 5   | X1 mouse                                         |
// | 0x06 | 6   | X2 mouse                                         |
// | 0x10 | 16  | Shift key                                        |
// | 0x11 | 17  | Ctrl key; Option key on Mac                      |
// | 0x12 | 18  | Alt key                                          |
// | 0x1B | 27  | Esc key                                          |
// | 0x5B | 91  | Win key on Windows; Super or Hyper key on Linux  |
// | 0x5D | 93  | Context Menu key; Apps key on Windows 10         |
// | 0x95 | 149 | Left Thumb-shift                                 |
// | 0x96 | 150 | Right Thumb-shift                                |
// | 0xE0 | 224 | Meta key on Linux; Command key on Mac            |
// 
// lockPref("ui.key.accelKey", 17);                                             // 界定用於網頁及前後文選單的 ｢修飾鍵｣
// lockPref("ui.key.menuAccessKey", 18);                                        // 界定用於流覽器選單的 ｢修飾鍵｣
// lockPref("ui.key.menuAccessKeyFocuses", false);                              // 按下 "menuAccessKey" 時呼出選單列. 在 Windows 和 Linux 作業系統中預設不顯示選單列.

// HTML AccessKey
// [macOS] 0 = disabled; 1 = Shift; 2 = Ctrl; 4 = Alt; 3 = Ctrl+Shift; 8 = Meta.
// 0 = disabled; 1 = Shift; 2 = Ctrl; 4 = Alt; 5 = Alt+Shift; 8 = Meta; 16 = Win.
// lockPref("ui.key.generalAccessKey", -1);
// lockPref("ui.key.chromeAccess", 4);  // Only used if generalAccessKey is -1.
// lockPref("ui.key.contentAccess", 5); // Only used if generalAccessKey is -1.

// Buttons
// [i] https://searchfox.org/mozilla-central/search?q=disable_button
// lockPref("pref.general.disable_button.default_browser", true);               // General --> Make Default
// lockPref("pref.browser.homepage.disable_button.current_page", true);         // Homepage --> Use Current page
// lockPref("pref.browser.homepage.disable_button.bookmark_page", true);        // Homepage --> Use Bookmark
// lockPref("pref.browser.homepage.disable_button.restore_default", true);      // Homepage --> Restore Defaults
lockPref("app.update.disable_button.showUpdateHistory", true);                  // General --> Show Update History
// lockPref("pref.downloads.disable_button.edit_actions", true);                // General --> Applications (MIME types)
// lockPref("security.disable_button.openCertManager", true);                   // Privacy --> View Crtificates
// lockPref("security.disable_button.openDeviceManager", true);                 // Privacy --> Security Devices
// lockPref("pref.privacy.disable_button.cookie_exceptions", true);             // Privacy --> Manage Data
// lockPref("pref.privacy.disable_button.view_cookies", true);                  // Privacy --> Manage Exceptions
// lockPref("pref.privacy.disable_button.view_passwords", true);                // Privacy --> Saved logins
// lockPref("pref.privacy.disable_button.view_passwords_exceptions", true);     // Passwords --> Exceptions
// lockPref("pref.privacy.disable_button.tracking_protection_exceptions", true); // Privacy --> ETP --> Exceptions
// lockPref("privacy.panicButton.enabled", false);                              // Customize Toolbar (Alt-V-T-C) --> Forget
lockPref("browser.messaging-system.whatsNewPanel.enabled", false);              // Menu/Toolbar --> What's New

// Accessibility
lockPref("accessibility.force_disabled", 1);                                    // 停用 ｢無障礙｣ 以防此功能被濫用於盜取機密資訊 (0/1) [BUG#1726887]
// defaultPref("accessibility.support.url", "https://support.mozilla.org/%LOCALE%/kb/accessibility-services");
// defaultPref("accessibility.typeaheadfind", true);                            // 隨打即找 (鍵入內容直接呼出查找列, 省去按 "Ctrl+F").
defaultPref("accessibility.typeaheadfind.enablesound", false);                  // whether to enable a sound notofication if no search terms are present when using the Find bar
// defaultPref("accessibility.blockautorefresh", false);                        // Meta refresh
// defaultPref("findbar.modalHighlight", true);                                 // 查找列: 强调色
// defaultPref("findbar.highlightAll", true);                                   // 查找列: 强调全部
// defaultPref("reader.parse-on-load.enabled", false);                          // 閱讀視圖
// defaultPref("print.save_print_settings", false);                             // 儲存印表機設定
// defaultPref("browser.zoom.siteSpecific", false);                             // Site-specific zoom
// defaultPref("full-screen-api.enabled", false);                               // 全熒幕 API

// Language enviroment
// defaultPref("intl.locale.requested", "en-US");                               // 流覽器介面語言套件 (語言環境). 樣式: "en-GB,uk-UA" (無空格).
// defaultPref("intl.accept_languages", "en-US, en");                           // 網頁排版語言偏好. 樣式: "en-GB, en, uk-UA, uk" (有空格).
lockPref("layout.spellcheckDefault", 0);                                        // HTML 可編輯介面元素之拼字檢查: 0 = 無動作; 1 = 多行控制項; 2 = 單行和多行控制項.
// defaultPref("javascript.use_us_english_locale", true);                       // 偽裝語言環境為 ｢美式英語｣ [*] RFP 功能 [BUG#867501,1629630]
// defaultPref("privacy.spoof_english", 2);                                     // 偽裝排版語言為 ｢美式英語｣: 0 = 提示; 1 = 否; 2 = 是. [*] RFP 功能 [GIT#1314]
// lockPref("extensions.getAddons.langpacks.url", "");                          // 將列表站址鎖定為空白以防止使用者新增語言套件

// Region
lockPref("browser.region.update.enabled", false);                               // 按地理位置更新在地化內容和服務
lockPref("browser.region.network.scan", false);                                 // Include Wi-Fi data in region request.
lockPref("browser.region.network.url", "");

// about:config
defaultPref("browser.aboutConfig.showWarning", false);

// about:profiles
lockPref("browser.disableResetPrompt", true);                                   // 停用翻新提示 [BUG#498181,940140] http://mzl.la/15sSfJR

// defaultPref("sidebar.position_start", true); // T = Left; F = Right.

// More From Mozilla
lockPref("browser.preferences.moreFromMozilla", false);                         // [95-] about:preferences#moreFromMozilla
lockPref("browser.vpn_promo.enabled", false);                                   // [97-] 乳製品
// lockPref("browser.vpn_promo.disallowed_regions", "");                        // [97-] 宇宙國安法, 樣式: "cn,hk,mo".
lockPref("browser.promo.focus.enabled", false);                                 // [100-] Firefox Focus 推介
// lockPref("browser.promo.focus.disallowed_regions", "");                      // [100-] 禁止推介 Firefox Focus 的地區, 樣式: "cn,hk,mo".

// ---------------------------------------------------
// # Search Engine
// ---------------------------------------------------

// 每次打開流覽器時重整搜尋引擎清單
clearPref("browser.policies.runOncePerModification.addSearchEngines");
clearPref("browser.policies.runOncePerModification.removeSearchEngines");

lockPref("browser.search.region", "US");                                        // 搜尋服務區域, 此設定同時影響貸記卡與住址填補服務
lockPref("browser.search.suggest.enabled", false);                              // 搜尋建議
lockPref("browser.search.suggest.enabled.private", false);                      // ｢私密流覽｣ 時提供搜尋建議
lockPref("browser.search.openintab", true);                                     // 搜尋結果在新分頁打開
// defaultPref("browser.search.context.loadInBackground", false);               // 背景載入搜尋結果
lockPref("browser.search.update", false);                                       // 更新從網頁新增的搜尋引擎 (需 OpenSearch 檔中有此定義)
defaultPref("browser.search.searchEnginesURL", "https://addons.mozilla.org/en-US/firefox/search-engines");
 
// defaultPref("browser.search.separatePrivateDefault", false);                 // ｢私密流覽｣ 時使用不同的搜尋引擎
// lockPref("browser.search.separatePrivateDefault.ui.enabled", false);
// lockPref("browser.search.separatePrivateDefault.ui.banner.max", 0);          // show search banner on about:privatebrowsing

// ---------------------------------------------------
// # Address Bar (Navbar, Megabar, Awsomebar)
// ---------------------------------------------------

// URI Fixup
lockPref("browser.fixup.dns_first_for_single_words", false);                    // 鍵入位址列的單字在按下 Enter 鍵之前始終訊問 DNS 伺服器

// URLbar
lockPref("browser.urlbar.openintab", true);                                     // 位址列鍵入的內容在新分頁打開
defaultPref("browser.urlbar.trimURLs", false);                                  // 位址列隱藏常見的網路通訊協定 (http) [BUG#1379247] [GIT#1473]
// defaultPref("browser.urlbar.autoFill", false);                               // 位址列自動補充 (auto fill) 已造訪過的網域名稱
defaultPref("browser.urlbar.maxRichResults", 15);                               // 自動補正 (auto complete) 條目數 [*] 此處的浮動式選單不支援按螢幕解析度調整長度
lockPref("browser.urlbar.speculativeConnect.enabled", false);                   // 位址列預取搜尋引擎或自動補充的網址
lockPref("browser.urlbar.dnsResolveSingleWordsAfterSearch", 0);                 // 向 DNS 訊問已搜尋的單字: 0 = 從不; 1 = 推測式; 2 = 始終. [i] 若 DNS 將 *單字* 解析為有效站址, 則提示 ｢您的言下之意是前往 *某網站* 嗎｣.
// defaultPref("browser.urlbar.decodeURLsOnCopy", true);                        // 位址列複製完整網址時翻譯百分號編碼 (Percent Encoding)

// Internationalized Domain Name
lockPref("network.IDN_show_punycode", true);                                    // 顯示泛用型網域編碼 (Punycode) 而非萬國碼 (Unicode) 字元
// lockPref("network.IDN.use_whitelist", false);                                // 當 "IDN_show_punycode" 為 ｢假｣ 時, 若 "IDN.use_whitelist" 為 ｢真｣, 那麼 "IDN.whitelist.*" 中為 ｢真｣ 的頂級網域 (TLD) 將可顯示為 unicode -- 除非 "restriction_profile" 中另有定義.
// lockPref("network.IDN.restriction_profile", "high");                         // ｢管制水準｣  (Restriction-Level): "high" 為第三級管制; "moderate" 為第四級管制; 其餘情形套用第一級管制. 參見 https://unicode.org/reports/tr39/#Restriction_Level_Detection

// Search Suggestions
lockPref("keyword.enabled", true);                                              // 位址列中的即時搜尋功能
// defaultPref("browser.urlbar.suggest.bookmark", true);                        // 即時搜尋中顯示書籤
defaultPref("browser.urlbar.suggest.history", false);                           // 即時搜尋中顯示流覽紀錄
defaultPref("browser.urlbar.suggest.openpage", false);                          // 即時搜尋中顯示已打開的分頁
// defaultPref("browser.urlbar.suggest.engines", true);                         // 即時搜尋中顯示搜尋引擎列
lockPref("browser.urlbar.suggest.searches", false);                             // 即時搜尋中顯示來自搜尋引擎的關鍵字
// defaultPref("browser.urlbar.suggest.topsites", false);                       // 滑鼠聚焦在位址列時浮出 Shortcuts [i] system.topsites=T
lockPref("browser.urlbar.sponsoredTopSites", false);                            // 滑鼠聚焦在位址列時浮出 Shortcuts 廣告
// defaultPref("browser.urlbar.suggest.remotetab", false);                      // 滑鼠聚焦在位址列時浮出正在其他平臺的 Firefox 上流覽的分頁
// defaultPref("browser.urlbar.suggest.calculator", false);                     // 為位址列配備小算盤
// defaultPref("browser.urlbar.filter.javascript", true);                       // 即時搜尋中濾掉小書籤 (Bookmarklet) [i] 即使留著也沒法用
// defaultPref("browser.urlbar.unitConversion.enabled", true);                  // 為位址列啟用單位換算

// Firefox Suggests
lockPref("browser.urlbar.quicksuggest.scenario", "history");                    // [94-] QuickSuggest 場景指示 (內部設定) [BUG#1729776]
// ^                                     "online" "offline" "history"
// ^ "quicksuggest.enabled"                    T         T         F
// ^ "quicksuggest.dataCollection.enabled"     F         F       n/a
// ^ "quicksuggest.shouldShowOnboardingDialog" T         F       n/a
// ^ "suggest.quicksuggest.nonsponsored"       T         T       n/a
// ^ "suggest.quicksuggest.sponsored"          T         T       n/a
// ^
lockPref("browser.urlbar.groupLabels.enabled", false);                          // 位址列按標籤分割搜尋建議
// lockPref("browser.urlbar.quicksuggest.enabled", false);                      // "Firefox Suggest" 標籤
lockPref("browser.urlbar.quicksuggest.dataCollection.enabled", false);          // Improve the Firefox Suggest experience
// lockPref("browser.urlbar.quicksuggest.shouldShowOnboardingDialog", false);   
lockPref("browser.urlbar.suggest.quicksuggest.nonsponsored", false);            // [94-] Suggestions from the web [BUG#1735976]
lockPref("browser.urlbar.suggest.quicksuggest.sponsored", false);               // [92-] Suggestions from sponsors [BUG#1728430]
// pref("browser.urlbar.quicksuggest.showOnboardingDialogAfterNRestarts", 0);   // Show QuickSuggest onboarding dialog on the nth browser restarts.
// pref("browser.urlbar.quicksuggest.sponsoredIndex", -1);                      // The indexes of the sponsored and non-sponsored Quick Suggest results within the general results group.
// pref("browser.urlbar.quicksuggest.nonSponsoredIndex", -1);                   // The indexes of the sponsored and non-sponsored Quick Suggest results within the general results group.
// pref("browser.urlbar.quicksuggest.remoteSettings.enabled", false);           // Whether Remote Settings is enabled as a Quick Suggest source.
// pref("browser.urlbar.quicksuggest.allowPositionInSuggestions", false);       // Whether Quick Suggest results can be shown in position specified in the suggestions.
// pref("browser.urlbar.quicksuggest.impressionCaps.nonSponsoredEnabled", false); // Whether non-sponsored Quick Suggest results are subject to impression frequency caps.
// pref("browser.urlbar.quicksuggest.impressionCaps.sponsoredEnabled", false);  // Whether sponsored Quick Suggest results are subject to impression frequency caps.
// pref("browser.urlbar.quicksuggest.blockingEnabled", false);                  // Whether the usual non-best-match Quick Suggest results can be blocked. This pref is a fallback for the Nimbus variable `quickSuggestBlockingEnabled`.
// pref("browser.urlbar.showSearchSuggestionsFirst", true);                     // Whether to show search suggestions before general results like history and bookmarks.
// pref("browser.urlbar.maxCharsForSearchSuggestions", 100);                    // As a user privacy measure, don't fetch search suggestions if a pasted string is longer than this.
// pref("browser.urlbar.bestMatch.enabled", false);                             // [99-] [BUG#1755057]
// pref("browser.urlbar.bestMatch.blockingEnabled", false);                     // [99-]
// pref("browser.urlbar.suggest.bestmatch", false);                             // [99-]
// pref("browser.partnerlink.attributionURL", "");                              // The base URL for the Quick Suggest anonymizing proxy.
// pref("browser.partnerlink.campaign.topsites", "");                           // To make a request to the anonymizing proxy, include a campaign ID in the path.

// ---------------------------------------------------
// # Startup page (about:home, about:newtab)
// ---------------------------------------------------

// UITour
lockPref("browser.uitour.enabled", false);                                      // 啟用 ｢導覽｣
// lockPref("browser.uitour.loglevel", "off");
lockPref("browser.uitour.url", "");
lockPref("browser.uitour.themeOrigin", "");

// Onboarding flow (about:welcome)
lockPref("browser.aboutwelcome.enabled", false);
lockPref("startup.homepage_welcome_url", "");
lockPref("startup.homepage_welcome_url.additional", "");
lockPref("startup.homepage_override_url", "");                                  // 新鮮事
lockPref("browser.startup.homepage_override.mstone", "ignore");
clearPref("browser.startup.homepage_override.buildID");
lockPref("trailhead.firstrun.newtab.triplets", "");                             // 三聯單 (Dynamic Triplets) [BUG#1659150]

// New tab
defaultPref("browser.startup.page", 0);                                         // Startup: 0 = (about:blank); 1 = (about:home); 2 = 最後造訪; 3 = 上次會話.
defaultPref("browser.startup.homepage", "about:blank");                         // Homepage and new window.
defaultPref("browser.startup.blankWindow", false);                              // 盡快顯示空白視窗以構成運作迅速的假象 [BUG#1448423]
defaultPref("browser.newtabpage.enabled", false);                               // Newtab: T = Activity Stream, F = about:blank.
lockPref("browser.newtab.preload", false);                                      // 預取 Activity Stream

// Messaging System Router (ASRouter)
// [i] CFR: Contextual Feature Recommender, FxA: Firefox Account.
// [i] https://firefox-source-docs.mozilla.org/browser/components/newtab/content-src/asrouter/docs/index.html
lockPref("browser.newtabpage.activity-stream.asrouter.userprefs.cfr.addons", false);   // Recommend extensions
lockPref("browser.newtabpage.activity-stream.asrouter.userprefs.cfr.features", false); // Recommend features
lockPref("browser.newtabpage.activity-stream.asrouter.providers.cfr", '{"id":"cfr","enabled":false}');
lockPref("browser.newtabpage.activity-stream.asrouter.providers.onboarding", '{"id":"onboarding","enabled":false}');
lockPref("browser.newtabpage.activity-stream.asrouter.providers.snippets", '{"id":"snippets","enabled":false}');
lockPref("browser.newtabpage.activity-stream.asrouter.providers.message-groups", '{"id":"message-groups","enabled":false}');
lockPref("browser.newtabpage.activity-stream.asrouter.providers.whats-new-panel", '{"id":"whats-new-panel","enabled":false}');
lockPref("browser.newtabpage.activity-stream.asrouter.providers.messaging-experiments", '{"id":"messaging-experiments","enabled":false}');

// Firefox Home, Discovery Stream (DS), Activity Stream (AS)
// [i] SPOC = Sponsored Content.
// [i] https://firefox-source-docs.mozilla.org/browser/components/newtab/docs/v2-system-addon/preferences.html
lockPref("browser.newtabpage.activity-stream.discoverystream.config", '{"api_key_pref":"extensions.pocket.oAuthConsumerKey","collapsible":true,"enabled":false,"show_spocs":false,"hardcoded_layout":true,"personalized":false}');
// ^ api_key_pref     (字串): 包含 Pocket API key 的變數名稱
// ^ collapsible      (布林): 控制新分頁中的 DS 區域可否折疊
// ^ enabled          (布林): 是否啟用 DS 並根據語言環境編製內部設定 (whether DS is programmatically set based on a user’s locale), 啟用時將關聯 "discoverystream.enabled" 為 ｢真｣.
// ^ show_spocs       (布林): 在新分頁中顯示廣告
// ^ hardcoded_layout (布林): 若為 ｢真｣, 將使用寫死的而非從伺服器獲取的編排方式.
// ^ personalized     (布林): 若為 ｢真｣, 將上載流覽紀錄以顯示客製化內容.
// ^ layout_endpoint  (字串): 若 "hardcoded_layout" 為 ｢假｣, 此處填入編排界定伺服器.
// ^ unused_key       (字串): 區分設定以防試驗參與者被取消註冊的標準途徑
lockPref("browser.newtabpage.activity-stream.discoverystream.enabled", false);                   // 當 "discoverystream.config" 中的 "enabled" 為 ｢真｣ 時, 此設定控制是否啟用 DS, 否則將展示舊的 AS. 
lockPref("browser.newtabpage.activity-stream.discoverystream.endpoints", "");                    // DS 遠端內容 (如新聞後設資料) 和設定 (如試驗版編排界定) 伺服器 [GIT#396]
// lockPref("browser.newtabpage.activity-stream.discoverystream.endpointSpocsClear", "");        // 使用者 ｢選擇退出｣ 銷售個資以贊助 Firefox 時通告廣告主
// lockPref("browser.newtabpage.activity-stream.discoverystream.engagementLabelEnabled", false); // 是否顯示卡片上興趣標誌 (engagement label), 如 ｢潮流風向｣ (Trending), ｢眼下正夯｣ (Popular).
// lockPref("browser.newtabpage.activity-stream.discoverystream.hardcoded-basic-layout", false); // 寫死的編排方式: F = DS 編排;  T = 仿製 AS 編排.
// lockPref("browser.newtabpage.activity-stream.discoverystream.rec.impressions", '{}');         // Firefox 編製的雜湊合表格 (hash table), key 為推薦 ID, 值為印證 first impression 的時間戳記.
// lockPref("browser.newtabpage.activity-stream.discoverystream.spoc.impressions", '{}');        // Firefox 編製的雜湊合表格, key 為廣告 ID, 值為印證 every impression 的時間戳記.
// lockPref("browser.newtabpage.activity-stream.discoverystream.locale-list-config", "");        // 預設啟用 ｢新聞｣ 卡片的語言環境, 樣式: "en-US,en-CA,en-GB", 此設定的優先權高於 "region-stories-config".
// lockPref("browser.newtabpage.activity-stream.discoverystream.region-stories-config", "");     // 預設啟用 ｢新聞｣ 卡片的地理位置, 樣式: "US,CA,GB".
// lockPref("browser.newtabpage.activity-stream.discoverystream.region-layout-config", "");      // 預設啟用了七列 ｢新聞｣ 內容的地理位置
// lockPref("browser.newtabpage.activity-stream.discoverystream.region-basic-layout", true);     // 若為 T 則 ｢新聞｣ 內容只有一列. 此設定依照 region-layout-config 的結果進行內部編制 (set programmatically).
// lockPref("browser.newtabpage.activity-stream.discoverystream.spocs-endpoint", "");            // 指定廣告伺服器 (endpoint for SPOCs), 此設定的優先權高於遠端與寫死的值.
// lockPref("browser.newtabpage.activity-stream.discoverystream.spocs-endpoint-query", "");      
// lockPref("browser.newtabpage.activity-stream.discoverystream.personalization.version", 1);    // 為新聞記分 (score) 的 personalization 演算法版次.
// lockPref("browser.newtabpage.activity-stream.discoverystream.personalization.modelKeys", ""); // personalization v2 演算法為新聞記分的主題清單
// lockPref("browser.newtabpage.activity-stream.discoverystream.recs.personalized", false);      // 客製新聞中是否包含常規新聞
// lockPref("browser.newtabpage.activity-stream.discoverystream.spocs.personalized", false);     // 客製新聞廣告 (Powered by AdZerk)
// lockPref("browser.newtabpage.activity-stream.discoverystream.isCollectionDismissible", true); // 故事集 (story collections) 可否被擯除 (dismissible).
// lockPref("browser.newtabpage.activity-stream.discoverystream.sponsored-collections.enabled", false); // 故事集廣告

// The New Pocket
clearPref("browser.newtabpage.activity-stream.impressionId");
lockPref("browser.newtabpage.activity-stream.feeds.section.topstories.options", '{"hidden":true,"show_spocs":false}');
// ^ api_key_pref       (字串): "extensions.pocket.oAuthConsumerKey"
// ^ hidden             (布林): 在 about:preferences#home 中顯示功能入口
// ^ provider_icon      (字串): "chrome://global/skin/icons/pocket.svg"
// ^ provider_name      (字串): Recommended by "Pocket"
// ^ read_more_endpoint (字串): ""
// ^ stories_endpoint   (字串): ""
// ^ stories_referrer   (字串): ""
// ^ topics_endpoint    (字串): ""
// ^ show_spocs         (布林): 顯示廣告
// lockPref("browser.newtabpage.activity-stream.feeds.section.topstories", false);            // This controls if the user should see newtab stories or not. It is set by the user via about:preferences#home
// lockPref("browser.newtabpage.activity-stream.feeds.system.topstories", false);             // controls the topstories section
lockPref("browser.newtabpage.activity-stream.feeds.discoverystreamfeed", false);              // Handles new pocket ui for the new tab page
// lockPref("browser.newtabpage.activity-stream.feeds.newtabinit", false);                    // NewTabInit: Sends a copy of the state to each new tab that is opened.
// lockPref("browser.newtabpage.activity-stream.feeds.places", false);                        // should create a Places feed
// lockPref("browser.newtabpage.activity-stream.feeds.section.highlights", false);            // Recent activity
// lockPref("browser.newtabpage.activity-stream.section.highlights.includeBookmarks", false); // Recent activity: Bookmarks
// lockPref("browser.newtabpage.activity-stream.section.highlights.includeDownloads", false); // Recent activity: Recent Download
// lockPref("browser.newtabpage.activity-stream.section.highlights.includePocket", false);    // Recent activity: Pocket
// lockPref("browser.newtabpage.activity-stream.section.highlights.includeVisited", false);   // Recent activity: Visited Pages
lockPref("browser.newtabpage.activity-stream.feeds.snippets", false);                         // Snippets: Tips and news from Mozilla
// lockPref("browser.newtabpage.activity-stream.feeds.systemtick", false);
lockPref("browser.newtabpage.activity-stream.feeds.telemetry", false);
// lockPref("browser.newtabpage.activity-stream.feeds.system.topsites", false);               // Shortcuts in URLbar
defaultPref("browser.newtabpage.activity-stream.feeds.topsites", false);                      // Shortcuts in Newtab
lockPref("browser.topsites.contile.enabled", false);                                          // Fetch sponsored Top Sites from Mozilla Tiles Service (Contile)
lockPref("browser.topsites.contile.endpoint", "");                                            // 圖塊廣告伺服器
lockPref("browser.topsites.useRemoteSetting", false);                                         // Sponsored Top Sites Rollout
lockPref("browser.newtabpage.activity-stream.tippyTop.service.endpoint", "");                 // TippyTop: 一套為 Topsites 供電的 Alexa Top Sites 圖示集. [i] https://mozilla.github.io/tippy-top-sites/manifest-viewer
// lockPref("browser.newtabpage.activity-stream.pocketCta", '{"cta_button":"","cta_text":"","cta_url":"","use_cta":false}'); // This is the new pocket configurable layout state.
// lockPref("browser.newtabpage.activity-stream.filterAdult", false);                         // 新分頁濾掉 NSFW 站點 [BUG#1159884]
lockPref("browser.newtabpage.activity-stream.fxaccounts.endpoint", "");                       // The remote FxA root content URL for the Activity Stream firstrun page.
// lockPref("browser.newtabpage.activity-stream.migrationExpired", true);                     // "Import From Another Browser"
defaultPref("browser.newtabpage.activity-stream.showSearch", false);                          // 在 AS 版新分頁顯示搜尋介面
// lockPref("browser.newtabpage.activity-stream.improvesearch.handoffToAwesomebar", false);   // AS 搜尋列是否跳到位址列 [i] 該介面不顯示 base64 圖示
lockPref("browser.newtabpage.activity-stream.improvesearch.topSiteSearchShortcuts", false);   // "Add Search Engine" option for Shortcuts
lockPref("browser.newtabpage.activity-stream.improvesearch.topSiteSearchShortcuts.searchEngines", ""); // Pinned search engines for Shortcuts
lockPref("browser.newtabpage.activity-stream.improvesearch.topSiteSearchShortcuts.havePinned", "");
lockPref("browser.newtabpage.activity-stream.default.sites", "");                             //  Default Shortcuts [BUG#1655051]
defaultPref("browser.newtabpage.pinned", '[{"url":"https://www.deepl.com/translator#en/zh/","label":"DeepL","searchTopSite":false},{"url":"https://www.bing.com/translator?fromLang=auto-detect&to=zh-Hans","label":"Translater","searchTopSite":false}]');  // Pinned Shortcuts
lockPref("browser.newtabpage.activity-stream.showSponsoredTopSites", false);                  // Shortcuts 廣告
lockPref("browser.newtabpage.activity-stream.showSponsored", false);                          // AS 廣告
lockPref("browser.newtabpage.activity-stream.telemetry", false);                              // AS 遙測
lockPref("browser.newtabpage.activity-stream.telemetry.structuredIngestion.endpoint", ""); 

// ---------------------------------------------------
// # Tab behaviour
// ---------------------------------------------------

// defaultPref("browser.warnOnQuit", false);                                    // Do not warn on quitting Firefox [i] 若 F 則建議啟用 "places.history.enabled".

// "focusmanager.testmode"                                                      // Allow the application to have focus even it runs in the background. [BUG#704583]
// "media.devices.unfocused.enabled"                                            // Turns off window-focus checks on the navigator.mediaDevices methods. [BUG#1740824]

// defaultPref("view_source.tab", true);                                        // 在新分頁檢視原始碼, 否則在新視窗
lockPref("browser.tabs.closeWindowWithLastTab", false);                         // 關閉最後一個分頁時結束程式
// lockPref("browser.tabs.insertRelatedAfterCurrent", true);                    // 相關分頁在相鄰分頁打開, 否則跳到末尾打開
lockPref("browser.tabs.insertAfterCurrent", true);                              // 所有新分頁都在相鄰分頁打開, 否則跳到末尾打開.
lockPref("browser.tabs.loadBookmarksInTabs", true);                             // 書籤在新分頁打開, 否則覆蓋當前分頁
// lockPref("browser.tabs.loadBookmarksInBackground", true);                    // 在新分頁中打開書籤時: T = 背景載入; F = 立即切換到該分頁.
// lockPref("browser.tabs.loadInBackground", true);                             // 在新分頁中打開連結時: T = 背景載入; F = 立即切換到該分頁.
// lockPref("browser.tabs.loadDivertedInBackground", true);                     // 將所有連結轉到背景載入
// lockPref("browser.tabs.tabmanager.enabled", true);                           // 始終顯示 ｢列出所有分頁｣ 按鈕
lockPref("browser.tabs.tabMinWidth", 96);                                       // 分頁標籤之最小寬度
// lockPref("browser.tabs.warnOnClose", true);                                  // 關閉多個分頁時警示
// lockPref("browser.tabs.warnOnCloseOtherTabs", true);                         // 關閉其他分頁時警示
// lockPref("browser.tabs.warnOnOpen", true);                                   // 打開超過指定數量的分頁時警示
// lockPref("browser.tabs.maxOpenBeforeWarn", 10);                              // 批次打開新分頁的閾值
lockPref("browser.tabs.crashReporting.sendReport", false);                      // 分頁當掉報告

defaultPref("browser.pagethumbnails.capturing_disabled", true);                 // 停用網頁縮圖 [BUG#1674252]
defaultPref("widget.disable-dark-scrollbar", true);                             // 不使用暗色調捲軸

lockPref("browser.link.open_newwindow", 3);                                     // 網站指定在新視窗打開連結時: 1 = 當前分頁; 2 = 新視窗; 3 = 新分頁.
lockPref("browser.link.open_newwindow.override.external", -1);                  // 外部請求: -1 = 遵循 "open_newwindow"; 1 = 當前分頁; 2 = 新視窗; 3 = 新分頁.
lockPref("browser.link.open_newwindow.restriction", 0);                         // 限制條件: 0 = 不設限, 一切聽候 "open_newwindow" 處置; 1 = 設限, 所有 window.open 屬性均按原樣處理; 2 = 除非具有 windowFeatures (popup) 參數, 否則不設限.

// defaultPref("dom.disable_beforeunload", false);                              // 停用關閉或重新整理 (含有表單的) 分頁時詢問使用者是否確定要離開該分頁

// Favicon
// pref("alerts.showFavicons", false);                                          // 網頁通知可否使用小圖示 (這將使網站能輕鬆傳送易混淆的推播通知).
// pref("browser.chrome.site_icons", false);                                    // 流覽紀錄和書籤可否使用小圖示 (避免了 favicon 追踪但降低了易用性).
// pref("browser.shell.shortcutFavicons", false);                               // 網站建立桌面捷徑時可否使用小圖示 (若 F 則套用 "HTML Document" 圖示).

// Download Manager
lockPref("browser.download.autohideButton", false);                             // 無下載任務時隱藏下載按鈕
// defaultPref("browser.download.folderList", 1);                                  // Save files to: 0 = Desktop; 1 = Downloads; 2 = Last used.
lockPref("browser.download.useDownloadDir", true);                              // 儲存檔案至預設資料夾, 否則將在每次彈出 "Save to..." 窗格.
lockPref("browser.download.forbid_open_with", true);                            // 停用 "Open with..." 按鈕以避免外來檔案逃脫流覽器沙箱 [BUG#1281959]
// defaultPref("browser.helperApps.deleteTempFileOnExit", false);               // 關閉流覽器時清除臨時下載 [BUG#302433] [i] 臨時下載: 透過外界程式打開 (Open With...) 的內容. 在 macOS 中, 臨時下載也會儲存到由 "folderList" 界定的資料夾.
// defaultPref("security.dialog_enable_delay", 1000);                           // 為 ｢打開｣ ｢運行｣ 按鈕附加延時 (毫秒) 以避免連續下載的檔案被意外執行.
defaultPref("browser.download.always_ask_before_handling_new_types", true);     // [100-] 僅為已知 MIME 類型套用自動下載
// defaultPref("browser.download.open_pdf_attachments_inline", true);           // [103-] 不尊重 PDF 檔的 "attachment" 和 "download" 表頭, 即始終由指定方式打開而非直接下載. [BUG#1772569]
// defaultPref("browser.download.alwaysOpenPanel", false);                      // 開始下載時彈出下載面板
// defaultPref("browser.download.clearHistoryOnDelete", 0);                     // 定義 ｢下載｣ 之前後文選單中的 "Delete" 動作: 
// ^ 0 - Don't remove the download from session list or history.
// ^ 1 - Remove the download from session list, but not history.
// ^ 2 - Remove the download from both session list and history.

// Developer Tools, Web Console, about:debugging
defaultPref("devtools.debugger.remote-enabled", false);                         // 遠端偵錯
defaultPref("devtools.theme", "dark");                                          // DevTools 布景
// defaultPref("devtools.toolbox.host", "window");                              // DevTools 視窗類型
// defaultPref("devtools.toolbox.previousHost", "bottom");                      // DevTools 視窗位置
// defaultPref("devtools.toolbox.selectedTool", "webconsole");                  // DevTools 首頁
// defaultPref("devtools.accessibility.enabled", false);                        // DevTools ｢無障礙｣ 分頁
// defaultPref("devtools.inspector.activeSidebar", "ruleview");                 // DevTools ｢元件檢查器｣ 側邊欄
// defaultPref("devtools.inspector.three-pane-enabled", false);                 // DevTools ｢元件檢查器｣ 三分窗格
defaultPref("devtools.performance.enabled", false);                             // DevTools ｢效能｣ 分頁
// defaultPref("devtools.performance.recording.ui-base-url", "http://localhost:5555"); // Firefox Profiler 實例
lockPref("devtools.screenshot.audio.enabled", false);                           // DevTools 攫取熒幕時播放快門聲
// lockPref("devtools.chrome.enabled", false);                                  // Web Console 可否執行程式碼 [BUG#922161]
// pref("devtools.selfxss.count", 0);                                           // 若小於 5 則禁止將程式碼貼到 Web Console

// Firefox View
defaultPref("browser.tabs.firefox-view", false);                                // [i] http://mzl.la/3bO6BMX
defaultPref("browser.tabs.firefox-view.logLevel", "off");
defaultPref("browser.tabs.firefox-view.notify-for-tabs", false);

// ---------------------------------------------------
// # Bookmark and Collections
// ---------------------------------------------------

// Bookmark (Library)
pref("browser.bookmarks.defaultLocation", "toolbar");                           // 書籤的預設儲存位置 ("toolbar", "menu" or "unfiled").
// defaultPref("browser.bookmarks.editDialog.showForNewBookmarks", "false");    // 新增書籤時彈出編輯窗格
// defaultPref("browser.bookmarks.max_backups", 30);                            // 書籤備份上限
// defaultPref("browser.bookmarks.autoExportHTML", true);                       // 關閉程式時匯出書籤為 bookmarks.html
// defaultPref("browser.bookmarks.file", "");                                   // 指定自動匯出書籤檔的位置
// defaultPref("browser.toolbars.bookmarks.visibility", "newtab");              // 書籤列僅在新分頁顯示 ("newtab", "always" or "never")

// ---------------------------------------------------
// # Forms and Autofill
// ---------------------------------------------------

defaultPref("extensions.formautofill.available", "off");                        // oldFormAutofillModule
defaultPref("extensions.formautofill.loglevel", "off");
defaultPref("extensions.formautofill.reauth.enabled", false);                   // Whether the user enabled the OS re-auth dialog.
lockPref("extensions.formautofill.addresses.supported", "off");                 // newAddressesAvailable
lockPref("extensions.formautofill.addresses.enabled", false);
lockPref("extensions.formautofill.addresses.capture.enabled", false);
lockPref("extensions.formautofill.addresses.ignoreAutocompleteOff", false);

defaultPref("extensions.formautofill.creditCards.available", false);            // oldCreditCardsAvailable
lockPref("extensions.formautofill.creditCards.supported", "off");               // newCreditCardsAvailable
lockPref("extensions.formautofill.creditCards.enabled", false);
lockPref("extensions.formautofill.creditCards.ignoreAutocompleteOff", false);

lockPref("dom.forms.autocomplete.formautofill", false);                         // Support @autocomplete values for form autofill feature.

// ---------------------------------------------------
// # Logins and Passwords (about:logins)
// ---------------------------------------------------

// Firefox Lockwise (Password Manager)
lockPref("signon.rememberSignons", false);                                      // Ask to save logins and passwords for websites
lockPref("signon.autofillForms", false);                                        // Autofill logins and passwords
// lockPref("signon.autofillForms.autocompleteOff", true);                      // 停用自動補充時仍顯示填補建議 [BUG#1531135]
lockPref("signon.formlessCapture.enabled", false);                              // 攫取非表單式密碼
lockPref("signon.storeWhenAutocompleteOff", false);                             // 停用記住密碼功能時仍儲存密碼
// pref("signon.generation.enabled", false);                                    // Suggest and generate strong passwords
lockPref("signon.management.page.breach-alerts.enabled", false);                // 密碼失竊警示, 需啟用 Lockwise.

// ---------------------------------------------------
// # Browsing History and Privacy Browsing
// ---------------------------------------------------

// defaultPref("privacy.history.custom", true);                                 // Use custom settings for history
defaultPref("places.history.enabled", true);                                    // Remember browsing and download history
lockPref("browser.formfill.enable", false);                                     // Remember search and form history

// Clear history when Firefox closes
defaultPref("privacy.sanitize.sanitizeOnShutdown", true);

// Setting for Clearing history
// defaultPref("privacy.clearOnShutdown.cache", true);                          // 快取圖片和檔案
// defaultPref("privacy.clearOnShutdown.cookies", true);                        // 訊錄
// defaultPref("privacy.clearOnShutdown.downloads", true);                      // 下載紀錄
// defaultPref("privacy.clearOnShutdown.formdata", true);                       // 表單資料 (Form & Search History)
// defaultPref("privacy.clearOnShutdown.history", true);                        // 流覽紀錄
// defaultPref("privacy.clearOnShutdown.offlineApps", true);                    // 代管資料 (Offline Website Data)
// defaultPref("privacy.clearOnShutdown.openWindows", false);                   // 打開的視窗 [*] It must be false, otherwise "Session Restore" will not work.
// defaultPref("privacy.clearOnShutdown.sessions", true);                       // 會話儲存 (Active Logins)
// defaultPref("privacy.clearOnShutdown.siteSettings", false);                  // 網站設定 (Site Preferences)

// Clear history from "Ctrl+Shift+Del"
// defaultPref("privacy.cpd.cache", true);
// defaultPref("privacy.cpd.cookies", true);
// defaultPref("privacy.cpd.downloads", true);
// defaultPref("privacy.cpd.formdata", true);
// defaultPref("privacy.cpd.history", true);
// defaultPref("privacy.cpd.offlineApps", true);
// defaultPref("privacy.cpd.openWindows", false);                               // [*] It must be false, otherwise "Session Restore" will not work.
// defaultPref("privacy.cpd.passwords", true);                                  // 已儲存的密碼
// defaultPref("privacy.cpd.sessions", true);
// defaultPref("privacy.cpd.siteSettings", false);

// Time range to clear (Apply to "clearOnShutdown" and "cpd" options)
lockPref("privacy.sanitize.timeSpan", 0);                                       // 0 = Everything; 1 = Last Hour; 2 = Last 2h; 3 = Last 4h; 4 = Today.

// Privacy Browsing (PB mode)
lockPref("browser.privatebrowsing.autostart", false);                           // 每次打開程式時進入 ｢私密流覽｣ 
lockPref("browser.privatebrowsing.promoEnabled", false)                         // 提示使用 ｢私密流覽｣ 模式
defaultPref("browser.privatebrowsing.vpnpromourl", "https://1.1.1.1/");         // 引薦內容
// defaultPref("browser.privatebrowsing.forceMediaMemoryCache", true);          // ｢私密流覽｣ 時強制使用主記憶體存取視訊暫存

// ---------------------------------------------------
// # Cookie
// ---------------------------------------------------

// 訊錄原則 [*]
// ^ https://developer.mozilla.org/en-US/docs/Web/Privacy/State_Partitioning
// ^ 0 = 統通接受; 1 = 拒絕第三者; 2 = 全盤拒絕; 3 = 接受已造訪的網站為第三者;
// ^ 4 = 拒絕跨網域的已知追蹤者並停用儲存器區隔;
// ^ 5 = 拒絕跨網域的已知追蹤者並強制區隔第三者儲存器.
// ^ 0, 4, 5 = 停用 ｢動態區隔｣; 0, 2 = 停用 ｢轉址追蹤防護｣.
// defaultPref("network.cookie.cookieBehavior", 4);
// defaultPref("network.cookie.cookieBehavior.pbmode", 4);

// 訊錄時效
// ^ 0 = 保存到過期為止, 2 = 結束程式時清理.
defaultPref("network.cookie.lifetimePolicy", 2); // [-104] [BUG#1759665,1681493] [GIT#1491]

// ---------------------------------------------------
// # Enhanced Tracking Protection (ETP)
// ---------------------------------------------------

// Tracking Protection (Provided by Disconnect.me)
// [*] 更改保護等級將啟用部分試驗性功能
lockPref("browser.contentblocking.category", "standard");                       // [*] release "cookieBehavior" before being locked.
// ^                                                                            "standard" "strict" "custom"
// ^ "network.cookie.cookieBehavior.pbmode"                                              5       5        5
// ^ "network.cookie.cookieBehavior"                                                     4       5        4
// ^ "privacy.trackingprotection.pbmode.enabled"                                         T       T        T
// ^ "privacy.trackingprotection.enabled"                                                F       T        F
// ^ "privacy.trackingprotection.socialtracking.enabled"                                 T       T        T
// ^ "privacy.trackingprotection.fingerprinting.enabled"                                 T       T        T
// ^ "privacy.trackingprotection.cryptomining.enabled"                                   T       T        T
// ^ "privacy.annotate_channels.strict_list.enabled"                                     F       T      n/a
// ^ "network.http.referer.disallowCrossSiteRelaxingDefault"                             T       T      n/a
// ^ "network.http.referer.disallowCrossSiteRelaxingDefault.top_navigation"              T       T      n/a
// ^ "privacy.partition.network_state.ocsp_cache"                                        F       T      n/a
// ^ "privacy.query_stripping.enabled"                                                   F       T      n/a
// ^ 
// lockPref("privacy.trackingprotection.pbmode.enabled", false);                // 是否於 ｢私密流覽｣ 時啟用追蹤防護
// lockPref("privacy.trackingprotection.enabled", false);                       // 追蹤防護
// lockPref("privacy.trackingprotection.socialtracking.enabled", false);        // 社會型網路追蹤
// lockPref("privacy.trackingprotection.fingerprinting.enabled", false);        // 端末指紋分析
// lockPref("privacy.trackingprotection.cryptomining.enabled", false);          // 加密貨幣採礦

// Redirect Tracking Protection
defaultPref("privacy.purge_trackers.enabled", false);                           // [*] 轉址追蹤防護 [BUG#1594226]
// ^ [i] Prerequisites: "cookieBehavior"= 1, 3, 4, 5 and "sanitizeOnShutdown",   
// ^ "clearOnShutdown.history",  "clearOnShutdown.siteSettings"= F.
defaultPref("privacy.purge_trackers.logging.level", "off");

// about:protections 引薦內容圖塊
defaultPref("browser.contentblocking.report.lockwise.enabled", false);
defaultPref("browser.contentblocking.report.monitor.enabled", false);
defaultPref("browser.contentblocking.report.proxy.enabled", false);
defaultPref("browser.contentblocking.report.show_mobile_app", false);
defaultPref("browser.contentblocking.report.hide_vpn_banner", true);
defaultPref("browser.contentblocking.report.cookie.url", "https://support.mozilla.org/1/firefox/VERSION/OS/%LOCALE%/cross-site-tracking-report");
defaultPref("browser.contentblocking.report.cryptominer.url", "https://support.mozilla.org/1/firefox/VERSION/OS/%LOCALE%/cryptominers-report");
defaultPref("browser.contentblocking.report.fingerprinter.url", "https://support.mozilla.org/1/firefox/VERSION/OS/%LOCALE%/fingerprinters-report");
defaultPref("browser.contentblocking.report.lockwise.how_it_works.url", "https://support.mozilla.org/1/firefox/VERSION/OS/%LOCALE%/password-manager-report");
defaultPref("browser.contentblocking.report.mobile-android.url", "https://play.google.com/store/apps/details?id=org.mozilla.firefox&hl=%LOCALE%");
defaultPref("browser.contentblocking.report.mobile-ios.url", "https://apps.apple.com/app/id989804926");
defaultPref("browser.contentblocking.report.monitor.sign_in_url", "https://monitor.firefox.com/oauth/init?entrypoint=protection_report_monitor");
defaultPref("browser.contentblocking.report.monitor.url", "https://monitor.firefox.com");
defaultPref("browser.contentblocking.report.proxy_extension.url", "https://fpn.firefox.com/browser");
defaultPref("browser.contentblocking.report.social.url", "https://support.mozilla.org/1/firefox/VERSION/OS/%LOCALE%/social-media-tracking-report");
defaultPref("browser.contentblocking.report.tracker.url", "https://support.mozilla.org/1/firefox/VERSION/OS/%LOCALE%/tracking-content-report");
defaultPref("browser.contentblocking.report.vpn-android.url", "https://play.google.com/store/apps/details?id=com.cloudflare.onedotonedotonedotone&hl=%LOCALE%");
defaultPref("browser.contentblocking.report.vpn-ios.url", "https://apps.apple.com/us/app/id1423538627");
defaultPref("browser.contentblocking.report.vpn-promo.url", "https://blog.cloudflare.com/1111-warp-better-vpn/");
defaultPref("browser.contentblocking.report.vpn.url", "https://1.1.1.1/");

// Do not Track (DNT)
lockPref("privacy.donottrackheader.enabled", false);                            // 請勿追蹤表頭: T = 傳送給所有網站, F = 傳送給 ETP 清單中的已知追蹤者.

// ---------------------------------------------------
// # Graphic (Image, Typeface)
// ---------------------------------------------------

// pref("layout.css.visited_links_enabled", false);                             // 為已造訪的連結著色 [BUG#147777]

// Visibility level of font families available to CSS font-matching
// ^ [macOS,Win10,Ubuntu] 1 = 僅基礎字型集; 2 = 含語言套件; 3 = 外加使用者安裝的字型. [BUG#1715507]
// ^ https://searchfox.org/mozilla-central/search?path=StandardFonts*.inc
defaultPref("layout.css.font-visibility.standard", 1);                          // [94-] 一般情況下的字型可見度
defaultPref("layout.css.font-visibility.trackingprotection", 1);                // [94-] 啟用 ｢追蹤防護｣ 時的字型可見度
defaultPref("layout.css.font-visibility.resistFingerprinting", 1);              // [94-] 啟用 ｢抗指紋分析｣ 時的字型可見度
defaultPref("layout.css.font-visibility.private", 1);                           // [94-] 啟用 ｢私密流覽｣ 時的字型可見度, 此設定將套用 "font-visibility.*" 中的較小值.

// pref("browser.display.use_document_fonts", 0);                               // 允許網站使用指定的字型. In theory: 0 = never, 1 = quick, 2 = always, though we always just use it as a bool.
// pref("browser.display.document_color_use", 1);                               // 為網站套用自訂色彩風格: 0 = 自動 (僅高對比度); 1 = 絕不; 2 = 始終.
// pref("browser.display.use_system_colors", false);                            // [Windows,macOS] 自動套用系統布景顏色
// pref("layout.css.prefers-color-scheme.content-override", 0);                 // [94-] Website appearance: 0 = Dark; 1 = Light; 2 = System Theme; 3 = FF Theme.
// pref("ui.systemUsesDarkTheme", 0);                                           // Override the system color scheme. 0 = light; 1 = dark; 2 = no-preference.
// pref("ui.use_standins_for_native_colors", true);                             // Prevent system colors from being exposed to CSS or canvas.

// pref("image.animation_mode", "once");                                        // 如何處置 GIF 動畫圖片: normal = 照常; once = 僅播一次; none = 靜止.
// pref("canvas.capturestream.enabled", "false")                                // 畫布串流

// ---------------------------------------------------
// # Media (Audio, Video)
// ---------------------------------------------------

// Autoplay blocking policy
// defaultPref("media.autoplay.blocking_policy", 2); // [BUG#1509933]
// ^ 0 = 黏性激發; ｢當前時間｣ >= ｢分頁激發時間｣.
// ^ 1 = 瞬息激發; ｢分頁激發時間｣ + ｢瞬息激發持續時間｣ > ｢當前時間｣ >= ｢分頁激發時間｣.
// ^ 2 = 輸入深度. sUserInputEventDepth, 所有  input, page load and mouse over events 的数量.
// ^ 瞬息激發持續時間由 "dom.user_activation.transient.timeout" 控制, 預設為 5 秒.

// DRM
// pref("media.eme.enabled", false);                                            // EME: Encrypted Media Execution, 加密媒介執事
// pref("media.gmp-provider.enabled", false);                                   // GMP: Gecko Media Plugins
// pref("media.gmp-gmpopenh264.enabled", false);                                // Open H.264 編解碼器 (這將僅用於 WebRTC)
// pref("media.gmp-widevinecdm.enabled", false);                                // WideVine CDM (內容譯碼模組)
// pref("media.gmp-widevinecdm.visible", false);                                // 功能入口

// defaultPref("media.navigator.enabled", false);                               // navigator.mediaDevices and getUserMedia() support

// WebRTC
// [i] For those computers that support mDNS, these prefs are almost useless.
//                         : 專用 : 公用 : 中繼 : 無候選者          : 介面
// force_interface         : Yes : Yes  : Yes  : 若介面不存在      : 僅設定的介面
// relay_only              : No  : No   : Yes  : 若未提供中繼伺服器 : 所有介面將嘗試與中繼連線
// use_document_iceservers : Yes : Yes  : Yes  : -                : 所有介面將嘗試與中繼連線
// default_address_only    : Yes : Yes  : Yes  : -                : 僅預設 route 提供的介面
// no_host                 : No  : Yes  : Yes  : -                : 所有介面
// peerconnection.enabled  : No  : No   : No   : 總是             :  -
// 
// [i] ICE: Interactive Connectivity Establishment
// [i] STUN: Session Traversal Utilities for NAT
// [i] TURN: Traversal Using Relay NAT
// 
// defaultPref("media.peerconnection.enabled", true);                           // 對等連線, WebRTC 之總閘. 啟用時將關聯 "media.navigator.enabled" 為 ｢真｣.
// defaultPref("media.peerconnection.ice.no_host", true);                       // 將專用 IP 位址移出 ICE 候選者 [BUG#1297416]
// defaultPref("media.peerconnection.ice.default_address_only", false);         // 候選者僅來自預設介面, router 需支援 hairpinning 否則 LAN 通訊將透過遠端 TURN 轉發. [BUG#1189041]
// defaultPref("media.peerconnection.use_document_iceservers", true);           // 套用站方 STUN/TURN 伺服器, 否則使用 "default_iceservers".
// defaultPref("media.peerconnection.ice.relay_only", false);                   // 僅生成中繼候選者, 可阻止專用和公用 IP 被指定為候選者, 但 TURN 伺服器仍會獲悉公用 IP 位址. [BUG#1189030]
// defaultPref("media.peerconnection.turn.disable", false);                     // 提供了全域禁止 TURN 伺服器的能力
// defaultPref("media.peerconnection.ice.force_interface", "");                 // 指定 ICE 介面, 須完全匹配否則無候選者. [BUG#1189040]
// defaultPref("media.peerconnection.ice.proxy_only_if_behind_proxy", true);    // 強制 proxy (若存在). 可避免全域 proxy 時向被 proxy 的網站暴露實際 IP 位址, 但若 proxy 不支援 UDP 將導致影音串流質量下降.
// ^ [i] 由於 proxy 及 VPN 多已支援跳過當地位址, 若啟用強制 proxy 或指定 VPN 介面, 
// ^     造訪當地網站時, 伺服器除了實際 IP, 還可透過 WebRTC 拿到 proxy/VPN 的出口 IP.

// WebTTS
defaultPref("media.webspeech.synth.enabled", false);                            // [i] 該功能會暴露本機語音合成引擎, 例如偽裝 en-us 環境卻檢測到 Microsoft Lili.

// Firefox ScreenSharing (using WebRTC)
// lockPref("media.getusermedia.screensharing.enabled", false);
// lockPref("media.getusermedia.browser.enabled", false);
// lockPref("media.getusermedia.audiocapture.enabled", false);

// ---------------------------------------------------
// # Web API
// ---------------------------------------------------

// 為 WebApp 套用經典 KeyPress 事件 (填入網域, 逗號分割, 無空格, 無引號)
// ^ 可以匹配子網域, 樣式為 "*.example.com".
// ^ 亦可精確到路徑, 樣式為 "example.com/foo", 這表示 "example.com/foo*" .
// ^ 路徑後加 "/" 意為僅限此目錄, 如: "example.com/foo/"
// ^ 目前無法限制通訊埠.
// pref("dom.keyboardevent.keypress.hack.dispatch_non_printable_keys.addl", "");
// 經典 keyCode 和 charCode 鍵盤事件, 樣式與 "dispatch_non_printable_keys" 一致.
// pref("dom.keyboardevent.keypress.hack.use_legacy_keycode_and_charcode.addl", "");

lockPref("dom.disable_window_flip", true);                                      // 拒絕 JavaScript 調整視窗位置
lockPref("dom.disable_window_move_resize", true);                               // 拒絕 JavaScript 移動和調整視窗大小
lockPref("dom.allow_scripts_to_close_windows", false);                          // 允許借 JavaScript 關閉視窗
// pref("dom.disable_open_during_load", true);                                  // 封鎖彈跳視窗
// pref("dom.popup_allowed_events", "click dblclick mousedown pointerdown");    // 允許建立彈跳視窗的事件 [BUG#1686045]
// pref("privacy.popups.policy", 1);                                            // 彈跳視窗原則: 0 = 無限制; 1 = "popup_maximum"; 2 = 白名單不受限; 3 = 統通封鎖.
// pref("dom.popup_maximum", 3);                                                // 彈跳視窗數量上限
// pref("dom.event.contextmenu.enabled", false);                                // 前後文選單 [BUG#379210] 停用可杜絕 JS 附加按鍵限制, 但將喪失互動性.
// pref("dom.event.clipboardevents.enabled", false);                            // HTMLElement.onpaste (不再傳送 "cut" 與 "copy" 事件)
// pref("dom.allow_cut_copy", false);                                           // 停用 "Document.execCommand" 中的 "cut" 與 "copy" 屬性 [GIT#1081]

// Service Worker
// pref("dom.serviceWorkers.enabled", false);

// Push API
lockPref("dom.push.enabled", false);                                            // 使 WebApp 能透過 Mozilla Push Service 傳遞推播消息, 需啟用 ServiceWorker.
lockPref("dom.push.connection.enabled", false);
lockPref("dom.push.serverURL", "");
clearPref("dom.push.userAgentID");

// Sensor API
// pref("device.sensors.enabled", false);
// pref("device.sensors.motion.enabled", false);                                // 動作感應器
// pref("device.sensors.orientation.enabled", false);                           // 方向感應器
// pref("device.sensors.ambientLight.enabled", false);                          // 光線感應器
// pref("device.sensors.proximity.enabled", false);                             // 距離感應器

// Geolocation API
// [i] https://developer.mozilla.org/en-US/docs/Web/API/Geolocation_API
defaultPref("browser.geolocation.warning.infoURL", "https://www.mozilla.org/%LOCALE%/firefox/geolocation");
// pref("geo.enabled", false); // Navigator.geolocation
// pref("geo.provider.network.url", "https://www.googleapis.com/geolocation/v1/geolocate?key=%GOOGLE_LOCATION_SERVICE_API_KEY%");
// pref("geo.provider.network.logging.enabled", false);
lockPref("geo.provider.ms-windows-location", false); // [Windows]
lockPref("geo.provider.use_corelocation", false); // [macOS]
lockPref("geo.provider.use_gpsd", false); // [Linux]
lockPref("geo.provider.use_geoclue", false) // [Linux]

// Navigator & WorkerNavigator API
// defaultPref("general.useragent.override", ""); // [BUG#933959]
// defaultPref("general.appname.override", "");
// defaultPref("general.appversion.override", "");
// defaultPref("general.buildID.override", "");
// defaultPref("general.platform.override", "");
// defaultPref("general.oscpu.override", "");
// defaultPref("dom.maxHardwareConcurrency", 16);

// ---------------------------------------------------
// # Site access permissions
// ---------------------------------------------------

// [i] 0 = 總是詢問; 1 = 總是允許; 2 = 統通拒絕. 
// [*] 此 API 尚未實現拒絕但標記為按需拒絕, 預設為拒絕將為端末附加指紋特徵

// lockPref("permissions.default.camera", 0);                                   // 相機許可權
// lockPref("permissions.default.desktop-notification", 0);                     // 通知許可權
// lockPref("permissions.default.geo", 0);                                      // 地理位置許可權
// lockPref("permissions.default.microphone", 0);                               // 話筒許可權
// lockPref("permissions.default.shortcuts", 0);                                // 捷徑許可權
// lockPref("permissions.default.xr", 0);                                       // 虛擬或擴增實境裝置許可權
lockPref("permissions.delegation.enabled", false);                              // 跨源時共用許可權
lockPref("permissions.manager.defaultsUrl", "");                                // 由 Mozilla 分發的特權設定
// lockPref("permissions.memory_only", true);                                   // 會話結束即清除許可權 [BUG#967812]

// ---------------------------------------------------
// # Add-on, Extension, Plug-in
// ---------------------------------------------------

lockPref("extensions.experiments.enabled", false);                              // WebExtensions Experiments [i] 透過擴充套件進行新 API 試驗

// defaultPref("extensions.update.enabled", false);
// defaultPref("extensions.update.autoUpdateDefault", false);
// defaultPref("extensions.systemAddon.update.enabled", false);
// defaultPref("extensions.systemAddon.update.url", "");

// Add-on file scopes
// ^ 1 = PROFILE; 2 = USER; 4 = APPLICATION; 8 = SYSTEM.
// ^ https://mike.kaply.com/2012/02/21/understanding-add-on-scopes
pref("extensions.enabledScopes", 5);                                            // 本機增益集整合範圍 (含無簽章的 XPI/JAR/ZIP 檔及未打包的增益集)
pref("extensions.autoDisableScopes", 15);                                       // 未顯式安裝時 (可攜式) 預設停用本機增益集的範圍

// AMO 站址
defaultPref("extensions.getAddons.link.url", "https://addons.mozilla.org/%LOCALE%/firefox/");
defaultPref("extensions.getAddons.search.browseURL", "https://addons.mozilla.org/%LOCALE%/firefox/search?q=%TERMS%&type=extension");

lockPref("extensions.getAddons.cache.enabled", false);                          // 顯示描述, 評分, 下載量等後設資料及 ｢獲取附加元件｣ 推薦板塊
// clearPref("extensions.getAddons.cache.lastUpdate");                          // 記錄附加元件後設資料的更新時間 (verb 記錄, noun 紀錄) 
lockPref("extensions.getAddons.showPane", false);                               // 搜尋窗格廣告位
lockPref("extensions.htmlaboutaddons.recommendations.enabled", false);          // Banner 廣告位
defaultPref("extensions.recommendations.privacyPolicyUrl", "https://www.mozilla.org/privacy/firefox");
defaultPref("extensions.recommendations.themeRecommendationUrl", "https://color.firefox.com");
lockPref("browser.discovery.enabled", false);                                   // 專屬套件推薦
lockPref("browser.discovery.containers.enabled", false);
// defaultPref("browser.discovery.sites", "");
lockPref("extensions.getAddons.discovery.api_url", "data:, ");

pref("extensions.langpacks.signatures.required", true)
pref("xpinstall.signatures.required", true);                                    // 強制增益集簽章, 否則拒絕安裝
pref("xpinstall.whitelist.required", true);                                     // Warn you when websites try to install add-ons

lockPref("extensions.postDownloadThirdPartyPrompt", false);                     // 略过非 AMO 安装前提醒 ｢请确认您信任此站址｣
// pref("extensions.webextensions.restrictedDomains", "");                      // Mozilla 網域上的增益集限制

// 移除增益集時保留資料
// defaultPref("extensions.webextensions.keepUuidOnUninstall", true);
// defaultPref("extensions.webextensions.keepStorageOnUninstall", true);

// about:compat
// pref("extensions.webcompat.enable_shims", true);         // SmartBlock
// pref("extensions.webcompat.perform_ua_overrides", true); // User Agent
// pref("extensions.webcompat.perform_injections", true);   // Interventions
lockPref("extensions.webcompat-reporter.enabled", false);   // 呈報網站相容性問題
// pref("extensions.webcompat-reporter.newIssueEndpoint", "");

// Firefox PDF.js
// pref("pdfjs.enableScripting", false);
// pref("pdfjs.previousHandler.alwaysAskBeforeHandling", true);

// Mozilla Pocket
lockPref("extensions.pocket.enabled", false); // 稍後讀 (Pocket)

// Firefox screenshot
// lockPref("extensions.screenshots.disabled", true); // Firefox Screenshots

// Firefox Translate (not the Bergamot one)
// browser.translation.detectLanguage    // [x] 翻譯: 偵測語言
// browser.translation.neverForLanguages // [x] 翻譯: 略過語言
// browser.translation.ui.show           // [x] 翻譯介面

// Firefox Theme
defaultPref("lightweightThemes.getMoreURL", "https://addons.mozilla.org/en-US/firefox/themes");

// Third-party Add-ons setting
defaultPref("extensions.greasemonkey.stats.optedin", false);
defaultPref("extensions.greasemonkey.stats.url", "");

// ---------------------------------------------------
// # External Protocol Handler
// ---------------------------------------------------

// 未知的外界協定處理方式
// defaultPref("network.protocol-handler.external-default", true);              // 將資料傳遞給外界協定處理程式
// defaultPref("network.protocol-handler.warn-external-default", true);         // 將資料傳遞給外界協定處理程式前先詢問

// 指定的外界協定處理方式
// defaultPref("network.protocol-handler.external.ms-windows-store", false);    // [Windows] 跳到 Microsoft Store

// GVfs/GIO 協定處理程式
// pref("network.gio.supported-protocols", "localtest:,recent:");               // [BUG#1433507]

// Universal Naming Convention (UNC)
// pref("network.file.disable_unc_paths", false);                               // 統一命名規約, 停用將影響區域網路資源 (如: 印表機) 共享.

// ---------------------------------------------------
// # Network
// ---------------------------------------------------

// Captive portal
lockPref("network.captive-portal-service.enabled", false);                      // ｢強制網路門戶｣ 偵測
lockPref("captivedetect.canonicalURL", "");                                     // 定期連線至 "http://detectportal.firefox.com/success.txt" 以檢查網路是否需要登入

// Connection status
defaultPref("network.manage-offline-status", false);                            // Do not automatically switch between offline and online
defaultPref("network.connectivity-service.enabled", false);                     // 檢查網路連線狀態 (online/offline)
// defaultPref("network.connectivity-service.IPv6.url", "");                    // [i] 回應內容與 captivedetect 一致
// defaultPref("network.connectivity-service.IPv4.url", "");                    // [i] 回應內容與 captivedetect 一致
// defaultPref("network.connectivity-service.DNSv6.domain", "iana.org");
// defaultPref("network.connectivity-service.DNSv4.domain", "iana.org");

// Prompt for redirects resulting in unsafe HTTP requests
// pref("network.http.prompt-temp-redirect", true);

// Referrer Policy [*]
// ^ 0 = No-referrer; 1 = Same-origin; 2 = Strict-origin-when-cross-origin; 
// ^ 3 = No-referrer-when-downgrade.
// pref("network.http.referer.defaultPolicy", 2);                               // 引薦來源表頭預設原則 (可被網站的原則覆蓋)
// pref("network.http.referer.defaultPolicy.pbmode", 2);                        // ｢私密流覽｣ 時的引薦表頭預設原則
// pref("network.http.referer.spoofSource", false);                             // 偽造引薦表頭, 依賴 anti-CSRF 原則的網站將有很大機率中止連線.
// pref("network.http.referer.hideOnionSource", true);                          // [Tor] 為 ".onion" 位址去除引薦表頭
// pref("network.http.sendRefererHeader", 1);                                   // 傳送引薦表頭: 0 = 從不; 1 = 僅按下連結時; 2 = 連結和圖片請求.
// pref("network.http.referer.XOriginPolicy", 1);                               // 異源傳送引薦表頭: 0 = 總是; 1 = 僅同網域時; 2 = 僅同主機時.
// pref("network.http.referer.trimmingPolicy", 2);                              // 引薦表頭精簡原則: 0 = 無動作; 1 = 僅網址; 2 = 僅主機.
// pref("network.http.referer.XOriginTrimmingPolicy", 2);                       // 異源引薦表頭精簡原則: 0 = 無動作; 1 = 僅網址; 2 = 僅主機.

// Hyperlink Auditing
// pref("browser.send_pings", false);
// pref("browser.send_pings.require_same_host", true);

// Domain Name System, Name Server
lockPref("network.dns.disablePrefetch", true);                                  // 停用 DNS 預取
// pref("network.dns.disableIPv6", true);                                       // 停用 IPv6 DNS

// TLS Extensions: Encrypted Server Name Indication (ESNI)
// "network.security.esni.enabled"                                              // [-83] 加密標的信號, 需 trr.mode = 2 or 3. [BUG#1667801,1689249] ESNI 自 RR85 起被 ECH 取代, 但在 RR83 時後端代碼已經被清理.

// Encrypted Client Hello (ECH)
// pref("network.dns.echconfig.enabled", true);                                 // 加密端末 Hello 表頭 [*] 試驗中, 需伺服器支援.
// pref("network.dns.echconfig.fallback_to_origin_when_all_failed", false);
// pref("network.dns.http3_echconfig.enabled", true);

// DNS Resource Records: "SVCB" and "HTTPS" types
// [i] https://emilymstark.com/2020/10/24/strict-transport-security-vs-https-resource-records-the-showdown.html
// [i] https://datatracker.ietf.org/doc/draft-ietf-dnsop-svcb-https/00/
// pref("network.dns.upgrade_with_https_rr", true);
// pref("network.dns.force_waiting_https_rr", true);                            // 強制在 DNS 詢問時等待 HTTPS 紀錄
// pref("network.dns.use_https_rr_as_altsvc", true);                            // 啟用 ECH 的條件之一

// HTTP Alternative Services
// pref("network.http.altsvc.enabled", false);                                  // Alt-Svc allows separation of transport routing from the origin host without using a proxy.
// pref("network.http.altsvc.oe", false);                                       // Opportunistic Encryption

// HTTP Prefetch
lockPref("network.prefetch-next", false);                                       // 預取相關分頁 (通常是 ｢下一頁｣ )
lockPref("network.predictor.enabled", false);                                   // 網路預取
// lockPref("network.predictor.enable-prefetch", false);                        // 推測式連線
lockPref("network.http.speculative-parallel-limit", 0);                         // 游標滑過連結即與其建立 TCP 連線
// lockPref("browser.places.speculativeConnect.enabled", false);                // [98-] 預取書籤和流覽紀錄條目

// HTTP/2 (SPDY Protocol)
// [i] FF 實作了一種具有侵略性的 ｢連線復用｣ 方案: 只要不同主機的憑證中包含相同網域即復用連線, 並不進行網域名稱解析.
// [i] https://daniel.haxx.se/blog/2016/08/18/http2-connection-coalescing/
// defaultPref("network.http.originextension", false);                          // the origin extension impacts h2 coalescing [BUG#1420777]
// defaultPref("network.http.spdy.enabled", false);
// defaultPref("network.http.spdy.enabled.deps", false);
// defaultPref("network.http.spdy.enabled.http2", false);
// defaultPref("network.http.spdy.websockets", false);

// HTTP/3 (QUIC protocol)
// "network.http.http3.enable"

// Proxy
// defaultPref("network.proxy.type", 5);                                        // Proxy type: 0 = Direct; 1 = Manual; 2 = PAC; 4 = WPAD; 5 = System.
// defaultPref("network.proxy.socks_remote_dns", true);                         // Whether the SOCKS v5 proxy should be in charge of DNS resolution.
// defaultPref("network.proxy.failover_direct", false);                         // Whether to force failover to direct for system requests. [i] https://blog.mozilla.org/security/2021/10/25/securing-the-proxy-api-for-firefox-add-ons/
// defaultPref("network.proxy.allow_bypass", false);                            // Whether to allow a bypass flag to be set on httpChannel that will prevent proxies from being used for that specific request. [BUG#1733481]
// defaultPref("network.proxy.no_proxies_on", ".local, 10.0.0.0/8, 172.16.0.0/12, 192.168.0.0/16, 169.254.0.0/16, fc00::/7, fe80::/16, edimax.setup, setup.zyxe.com, repeater.asus.com, router.asus.com"); // No proxy for. [i] Connections to localhost, 127.0.0.1/8 and ::1 are never proxied.

// ---------------------------------------------------
// # Trusted Recursive Resolver (TRR)
// ---------------------------------------------------

// [i] http://dns-learning.twnic.net.tw/dns/03opDNS.html
// [i] https://www.cloudflare.com/learning/dns/dns-server-types
// [i] https://developers.google.com/speed/public-dns/docs/ecs

// DNS over HTTPS
// pref("network.trr.mode", 2);                                                 // 可信賴的遞迴式解析器: 0 = 停用; 2 = 優先; 3 = 唯一; 5 = 同〇但標記為按需停用.
// pref("network.trr.uri", "https://dns.twnic.tw/dns-query");                   // 預設 DoH 伺服器
// pref("network.trr.bootstrapAddr", "101.101.101.101");                        // 填入 "trr.uri" 的 IP 位址以跳過使用本機 DNS 解析 DoH 網域
// pref("network.trr.credentials", "B6BC3DB94C060CEC49F2087F17C35FB483939C7274EC187F6F414507D278D1B4"); // Auth 表頭
// pref("network.trr.useGET", false);                                           // 使用 GET 而非 POST 方式發出 TRR 請求
// pref("network.trr.custom_uri", "TWNIC Quad 101");                            // 使用者介面中的 "Custom" 列, 此設定不影響實際 DoH 端點設定.
// pref("network.trr.allow-rfc1918", false);                                    // 允許 TRR 回應中使用 RFC1918 中界定的 ｢專用 IP 位址｣
// pref("network.trr.request_timeout_ms", 2000);                                // TRR 回應逾時 (毫秒).
// pref("network.trr.request_timeout_mode_trronly_ms", 8000);                   // "trr.mode"=3 時的 TRR 回應逾時 (毫秒).
// pref("network.trr.disable-ECS", true);                                       // 要求解析器停用 ECS (EDNS Client Subnet). 停用以避免追蹤, 但不含 Client IP 的詢問有可能被拒絕 [i] https://twitter.com/Zenexer/status/1173746514130296832
// pref("network.trr.excluded-domains", ".local, 10.0.0.0/8, 172.16.0.0/12, 192.168.0.0/16, 169.254.0.0/16, fc00::/7, fe80::/16, edimax.setup, setup.zyxe.com, repeater.asus.com, router.asus.com");  // 例外清單, 使用本機而非 TRR 解析的網域的逗號分隔清單.

// Oblivious DoH (ODoH)
// [i] https://blog.cloudflare.com/oblivious-dns
// "network.trr.odoh.enabled"
// "network.trr.odoh.configs_uri"
// "network.trr.odoh.target_path"
// "network.trr.odoh.target_host"
// "network.trr.odoh.proxy_uri"
// "network.trr.odoh.min_ttl"

// ---------------------------------------------------
// # Digital Certificate
// ---------------------------------------------------

lockPref("security.insecure_connection_icon.enabled", true);                    // 為明文網頁顯示 ｢不安全｣ 圖示
lockPref("security.insecure_connection_icon.pbmode.enabled", true);
lockPref("security.insecure_connection_text.enabled", true);                    // 為明文網頁顯示 ｢不安全｣ 文字
lockPref("security.insecure_connection_text.pbmode.enabled", true);

// pref("security.osclientcerts.autoload", false);                              // 匯入本機憑證倉庫中的私人憑證 (Private Cert) 及加密權杖憑證 (PKCS#11)
// pref("security.enterprise_roots.enabled", false);                            // 匯入本機憑證倉庫中的根憑證 (Trusted Root-CA)
// pref("security.default_personal_cert", "Ask Every Time");                    // 伺服器申請使用私人憑證时執行確認動作

// MitM Detect
// 
// [i] 若本機存在一個全域 proxy, 同時, 流覽器遇到一個 ｢網路問題｣, 則透過發出特定連線以
//     判斷是否存在一個不受信賴的根憑證. 若存在, 則將使用者介面上的錯誤資訊頁由 
//     about:neterror 轉向 about:certerror, 並向 Mozilla 上載該憑證去做巨集資料分析.
//     對於憑證鏈生變但根憑證又受到信賴之情形, 爰不影響網路連線而不發出任何提示. 這使得
//     該功能喪失了實用價值, 又把自我簽署的憑證暴露在網路上, 根本得不償失.
// 
lockPref("security.certerrors.mitm.auto_enable_enterprise_roots", false);       // Auto flip "enterprise_roots.enabled".
lockPref("security.certerrors.mitm.priming.enabled", false);                    // Don't do network connections for mitm priming
// lockPref("security.certerrors.mitm.priming.endpoint", "");
lockPref("security.certerrors.recordEventTelemetry", false);

lockPref("browser.xul.error_pages.expert_bad_cert", true);                      // 安全憑證例外頁面展開詳細資訊

pref("security.cert_pinning.enforcement_level", 2);                             // 憑證釘選原則: 0 = 寬鬆; 1 = 僅本機寬鬆; 2 = 嚴格.
// pref("security.nocertdb", true);                                             // 停用中間憑證快取以避免追蹤, 但可能導致安全連線出錯. [i] https://wiki.mozilla.org/Security/CryptoEngineering/Intermediate_Preloading

pref("security.pki.sha1_enforcement_level", 1); // [-103] SHA-1 憑證
// ^ 0 = 准許; 1 = 拒絕; 2 = 准許民國 105 年前簽署的憑證;
// ^ 3 = 4+僅適用於偵錯組建; 4 = 准許 105 年前簽署的或由已匯入的根憑證所簽發的憑證.

// pref("security.ssl.disable_session_identifiers", true);                      // 會話復原: 會話辨識 [BUG#967977] 停用以避免追蹤, 但會導致安全連線出錯. 會話辨識碼時效為一天.
// pref("security.ssl.enable_false_start", false);                              // 會話復原: SSL 搶跑 [BUG#658222] [GIT#536] 停用以避免降級攻擊, 但會導致安全連線被重設.
// pref("security.tls.enable_0rtt_data", false);                                // 會話復原: 零往復/無開銷復原 [i] 預備共用鍵 (PSK) 不提供正向加密, 且無狀態票據易遭重播攻擊.

// pref("security.ssl.require_safe_negotiation", true);                         // 強制密文交握 [i] 啟用後將無法載入 https://ipcrs.pbccrc.org.cn 之類的清朝網站.
lockPref("security.ssl.treat_unsafe_negotiation_as_broken", true);              // 明文交握視同非安全連線

// 0 = SSL 3.0; 1 = TLS 1.0; 2 = TLS 1.1; 3 = TLS 1.2; 4 = TLS 1.3.
// pref("security.tls.version.max", 4);                                         // 可接受的 TLS 協定上限
// pref("security.tls.version.min", 3);                                         // 可接受的 TLS 協定下限
// pref("security.tls.version.enable-deprecated", false);                       // 允許過時的 TLS 協定 (僅會話階段有效)

// SSL3/TLS Cipher Suite
// [i] https://ciphersuite.info/cs/%IANA
// [*] 停用密碼套件將為端末附加指紋特徵
// pref("security.tls13.chacha20_poly1305_sha256", false);                      // // // 0x1303 TLS_CHACHA20_POLY1305_SHA256
// pref("security.tls13.aes_256_gcm_sha384", false);                            // // // 0x1302 TLS_AES_256_GCM_SHA384
// pref("security.tls13.aes_128_gcm_sha256", false);                            // // // 0x1301 TLS_AES_128_GCM_SHA256
// pref("security.ssl3.ecdhe_ecdsa_chacha20_poly1305_sha256", false);           // // 0xCCA9 TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305_SHA256
// pref("security.ssl3.ecdhe_rsa_chacha20_poly1305_sha256", false);             // // 0xCCA8 TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256
// pref("security.ssl3.ecdhe_rsa_aes_256_gcm_sha384", false);                   // // 0xC030 TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384
// pref("security.ssl3.ecdhe_rsa_aes_128_gcm_sha256", false);                   // // 0xC02F TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256
// pref("security.ssl3.ecdhe_ecdsa_aes_256_gcm_sha384", false);                 // // 0xC02C TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384
// pref("security.ssl3.ecdhe_ecdsa_aes_128_gcm_sha256", false);                 // // 0xC02B TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256
// pref("security.ssl3.ecdhe_rsa_aes_256_sha", false);                          // 0xC014 TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA [*] break Microsoft, CNKI
// pref("security.ssl3.ecdhe_rsa_aes_128_sha", false);                          // 0xC013 TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA
// pref("security.ssl3.ecdhe_ecdsa_aes_256_sha", false);                        // 0xC00A TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA
// pref("security.ssl3.ecdhe_ecdsa_aes_128_sha", false);                        // 0xC009 TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA
// pref("security.ssl3.rsa_aes_256_gcm_sha384", false);                         // 0x009D TLS_RSA_WITH_AES_256_GCM_SHA384
// pref("security.ssl3.rsa_aes_128_gcm_sha256", false);                         // 0x009C TLS_RSA_WITH_AES_128_GCM_SHA256
// pref("security.ssl3.dhe_rsa_aes_256_sha", false);                            // 0x0039 TLS_DHE_RSA_WITH_AES_256_CBC_SHA
// pref("security.ssl3.rsa_aes_256_sha", false);                                // 0x0035 TLS_RSA_WITH_AES_256_CBC_SHA
// pref("security.ssl3.dhe_rsa_aes_128_sha", false);                            // 0x0033 TLS_DHE_RSA_WITH_AES_128_CBC_SHA
// pref("security.ssl3.rsa_aes_128_sha", false);                                // 0x002F TLS_RSA_WITH_AES_128_CBC_SHA
// // pref("security.ssl3.deprecated.rsa_des_ede3_sha", false);                 // 0x000A [BUG#1724072]
// pref("security.ssl3.rsa_des_ede3_sha", false);                               // 0x000A TLS_RSA_WITH_3DES_EDE_CBC_SHA

// Online Certificate Status Protocol (OCSP)
// pref("security.OCSP.enabled", 1);                                            // 線上憑證狀態協定: 0 = 停用; 1 = 啟用; 2 = 僅 EV 憑證時啟用.
// pref("security.OCSP.require", false);                                        // 強制 OCSP: 詢問失敗時終止連線 [*] google.cn 詢問 ocsp.pki.goog 在牆國必將失敗.
// pref("security.ssl.enable_ocsp_stapling", true);                             // OCSP 裝訂 [BUG#966856] [i] https://docs.microsoft.com/answers/comments/661977/view.html
// pref("security.ssl.enable_ocsp_must_staple", true);                          // 強制 OCSP 裝訂

// CRLite
// [i] 相似功能 "OneCRL" 乃 "extensions.blocklist.enabled" 中的一部分.
// defaultPref("security.remote_settings.crlite_filters.enabled", true);        // CRLite 憑證撤銷清單 [*] 試驗中
defaultPref("security.pki.crlite_mode", 0);                                     // CRLite 執行類型: 0 = 關閉; 1 = 隱式執行 (僅遙測呈報); 2 = 顯式執行.

// ---------------------------------------------------
// # Content Security Policy
// ---------------------------------------------------

// pref("security.csp.enable", true);                                           // 內容安全原則
// pref("security.mixed_content.block_active_content", true);                   // 混合內容: 封鎖明文現用內容 (Active Content)
// pref("security.mixed_content.block_display_content", true);                  // 混合內容: 封鎖明文常在內容 (Display Content)
// pref("security.mixed_content.block_object_subrequest", true);                // 混合內容: 封鎖明文物件子請求 [BUG#1190623]
// pref("security.mixed_content.upgrade_display_content", true);                // 混合內容: 強行將明文常在內容提升到 HTTPS 協定

// HTTP Cross-Origin Resource Sharing (CORS)
// pref("security.fileuri.strict_origin_policy", false);                        // 要求 "file:///" URI 符合同源原則 (同資料夾及其子資料夾中的其他檔案不再符合同源原則).
// pref("network.cors_preflight.allow_client_cert", true);                      // 允許在 CROS 預檢請求中傳送端末憑證 [BUG#1511151]

// HTTP authentication
pref("network.auth.subresource-http-auth-allow", 1);                            // 子資源觸發 HTTP 身分認證會話方塊: 0 = 拒絕; 1 = 僅同源; 2 = 允許.
// pref("network.auth.force-generic-ntlm-v1", false);                           // NTLM v1 authentication [BUG#828183] [KB#2793313]

// pref("dom.security.https_first", true);                                      // [90-]  HTTPS-First Mode [i] PR_END_OF_FILE_ERROR
// pref("dom.security.https_first_pbm", true);                                  // [90-] HTTPS-First Mode in Private Browsing
// pref("dom.security.https_only_mode", true);                                  // HTTPS-Only Mode
// pref("dom.security.https_only_mode_pbm", true);
// pref("dom.security.https_only_mode.upgrade_local", true);                    // 為本機子網路套用 HTTPS-Only
// pref("dom.security.https_only_mode_send_http_background_request", true);     // HTTPS-Only 時同時傳送 3 秒延時的 http 請求並執行賽馬制以跳過 90 秒延時的 ｢安全連線不可用｣ 逾時訊息

// ---------------------------------------------------
// # OS Specific Feture
// ---------------------------------------------------

// Windows Only
lockPref("toolkit.winRegisterApplicationRestart", false);                       // 若關機前未關閉 FF, 下次開機時 FF 將自動打開並恢復分頁 
lockPref("browser.download.manager.addToRecentDocs", false);                    // 下載的檔案加入開始選單中的 "Recent Files".
// lockPref("browser.taskbar.lists.enabled", false);                            // Taskbar --> JumpList
// lockPref("browser.taskbar.lists.frequent.enabled", false);                   // Taskbar --> JumpList --> Frequent Folders
// lockPref("browser.taskbar.lists.recent.enabled", false);                     // Taskbar --> JumpList --> Recent Files
// lockPref("browser.taskbar.lists.tasks.enabled", false);                      // Taskbar --> JumpList --> Show Tabs
// lockPref("browser.taskbar.previews.enable", false);                          // Taskbar --> Thumbnail Preview
// lockPref("network.http.windows-sso.enabled", false);                         // Microsoft Account SSO
lockPref("security.family_safety.mode", 0);                                     // Microsoft Family Safety: 0 = 無視之; 1 = 僅偵測; 2 = 偵測並匯入根憑證.
// lockPref("widget.windows.hide_cursor_when_typing", false);                   // 打字時隱藏游標 [BUG#1757463]

// ---------------------------------------------------
// # Privacy (Tor Browser fetures)
// ---------------------------------------------------

// [*] 本單元羅列之偏好設定皆屬試驗性功能, 仍在測試或僅具原型, 行銷價值大於實用價值.

// Container Tabs
// defaultPref("privacy.userContext.enabled", true);                            // 身分容器
// defaultPref("privacy.userContext.ui.enabled", true);
// defaultPref("privacy.usercontext.about_newtab_segregation.enabled", true);
// defaultPref("privacy.userContext.newTabContainerOnLeftClick.enabled", false); // 按一下 "+" 按鈕即顯示身分容器選單

// URL query string stripping (建議以 uBO 取代)
// defaultPref("privacy.query_stripping.enabled", false);                       // 剝離詢問參數
// defaultPref("privacy.query_stripping.redirect", true);
// defaultPref("privacy.query_stripping.strip_list", "");                       // 空格分割的詢問參數
// defaultPref("privacy.query_stripping.allow_list", "");

/**
 *
 * ︻    Tor      Chrome    Safari
 * 時    甲方隔離  網站隔離  智慧防追蹤
 * 局      \         |         /           呈遞到 w3c 群組
 * 圖    Mozilla 動 態 甲 方 區 隔 專 案 ---------------------> 端末儲存器區隔專案
 * ︼                                        再 度 更 名
 *                       .--- 網路區隔
 *       狀態區隔 -------+
 *       (儲存器存取原則) `--- 儲存器區隔 ---> 動態區隔
 *                                         (動態狀態區隔)
 *                                         (動態儲存器區隔)
 * 
 * 友商一 ｢開源｣, 火狐就 ｢自主｣. -- 匿名懦夫
 * 
 *   甲方隔離 First-Party Isolation
 *   網站隔離 Site Isolation
 *   智慧防追蹤 Intelligent Tracking Prevention
 *   
 * 我們沒有生造詞, 我們只是大辭典的搬運工. -- Mozilla 未嘗如是說
 * 
 *   動態甲方區隔 Dynamic First Party Isolation
 *   端末儲存器區隔 Client-Side Storage Partitioning
 *   狀態區隔 State Partitioning
 *   儲存器存取原則 Storage Access Policy
 *   網路區隔 Network Partitioning
 *   儲存器區隔 Storage Partitioning
 *   
 * 物質世界是絕對運動和相對靜止的. -- 不是 Mozilla 說的
 * 
 *   動態區隔 Dynamic Partitioning
 *   動態狀態區隔 Dynamic State Partitioning
 *   動態儲存器區隔 Dynamic Storage Partitioning
 *   
*/

// First Party Isolation (FPI)
// defaultPref("privacy.firstparty.isolate", true);
// defaultPref("privacy.firstparty.isolate.restrict_opener_access", true);
// defaultPref("privacy.firstparty.isolate.block_post_message", true);
// defaultPref("privacy.firstparty.isolate.use_site", true);

// Dynamic First Party Isolation (dFPI)
// [i] https://developer.mozilla.org/en-US/docs/Mozilla/Firefox/Privacy/State_Partitioning
// defaultPref("privacy.partition.network_state", true);                        // Network Partitioning
// defaultPref("privacy.partition.serviceWorkers", true);                       // isolate service workers

// Dynamic Partitioning
// defaultPref("fission.autostart", true);                                      // [*] 需 gfx.webrender.all=T 且 fission.* 及 gfx.webrender.* 皆為預設.

// Resist Fingerprinting (RFP)
// defaultPref("privacy.resistFingerprinting", false);                          // [*] 抗指紋分析之總閘, 啟用前需將其餘偏好恢復預設 [BUG#418986]
// defaultPref("privacy.window.maxInnerWidth", 1600);                           // 視窗區域尺寸: 寬為 200n.
// defaultPref("privacy.window.maxInnerHeight", 900);                           // 視窗區域尺寸: 高為 100n.
// defaultPref("privacy.resistFingerprinting.letterboxing", true);              // 動態調整內容區域尺寸
// defaultPref("privacy.resistFingerprinting.letterboxing.dimensions", "800x600, 1000x1000, 1600x900"); // 內容區域尺寸

// defaultPref("privacy.window.name.update.enabled", true);                     // 載入新網域時 "window.name" 將被清空 [BUG#1685089]
lockPref("privacy.resistFingerprinting.block_mozAddonManager", true);           // 停用 mozAddonManager API 以防止增益集掃描

// -----------------------
// STAND WITH UKRAINE
// -----------------------
